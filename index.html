<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Scoreboard Dashboard</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Google Fonts: Press Start 2P & Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a1a;
            background-image:
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 20px 20px;
            color: #e0e0e0;
        }
        .font-pixel {
            font-family: 'Press Start 2P', cursive;
        }
        .panel {
            background: rgba(26, 26, 26, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2);
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .scan-button {
            transition: all 0.3s ease;
        }
        .scan-button:hover {
            transform: translateY(-3px) scale(1.05);
        }
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
        .team-input {
            background: transparent;
            border: none;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            font-size: 1.5rem; /* Adjusted font size */
            line-height: 2rem;
            font-weight: 700;
            width: 100%;
            padding-bottom: 0.5rem;
            outline: none;
            transition: border-color 0.3s ease;
        }
        .team-input:focus {
            border-bottom-color: #fff;
        }
        .color-picker {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 40px;
            height: 40px;
            background-color: transparent;
            border: none;
            cursor: pointer;
        }
        .color-picker::-webkit-color-swatch {
            border-radius: 50%;
            border: 2px solid #fff;
        }
        .color-picker::-moz-color-swatch {
            border-radius: 50%;
            border: 2px solid #fff;
        }
        .manual-score-input {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            text-align: center;
            width: 100%;
            padding: 8px;
            border-radius: 8px;
            font-size: 1rem;
            outline: none;
            -moz-appearance: textfield; /* Firefox */
        }
        .manual-score-input::placeholder { color: rgba(255, 255, 255, 0.4); }
        .manual-score-input:focus { border-color: #fff; }
        .manual-score-input::-webkit-outer-spin-button,
        .manual-score-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #888; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #555; }
        
        #gamble-reel {
            text-shadow: 0 0 10px #facc15, 0 0 20px #facc15;
        }
        
        @keyframes switch-color {
          0%, 49.9% {
            color: #ffffff;
            text-shadow: 0 0 5px rgba(255,255,255,0.5);
          }
          50%, 99.9% {
            color: var(--team-color, #ffffff);
            text-shadow: 0 0 20px var(--team-color, #ffffff);
          }
          100% {
            color: #ffffff;
            text-shadow: 0 0 5px rgba(255,255,255,0.5);
          }
        }
        .score-blinking {
          animation: switch-color 2s infinite steps(1, end);
        }
        
        @keyframes event-fade-in {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .event-banner {
            animation: event-fade-in 0.5s ease-out forwards;
        }

        @keyframes wave {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .title-char {
            display: inline-block;
            animation: wave 2s infinite ease-in-out;
        }
    </style>
</head>
<body class="p-2 sm:p-4">

    <div class="max-w-7xl mx-auto">
        <header class="text-center mb-2">
            <h1 id="main-title" class="font-pixel text-2xl sm:text-3xl text-yellow-400 tracking-widest" style="text-shadow: 0 0 10px #facc15;">
                <!-- Title will be generated by JS -->
            </h1>
            <p class="text-gray-300 mt-1 text-xs sm:text-sm">‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡πÑ‡∏£‡πâ‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô</p>
        </header>

        <!-- Team Selection -->
        <div class="flex justify-center items-center gap-4 mb-4">
            <span class="font-bold text-gray-300">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡∏°:</span>
            <button id="set-2-teams-btn" class="panel px-4 py-2 bg-blue-600 rounded-lg transition border-2 border-blue-400">2 ‡∏ó‡∏µ‡∏°</button>
            <button id="set-3-teams-btn" class="panel px-4 py-2 bg-gray-700 rounded-lg transition border-2 border-transparent hover:border-blue-400">3 ‡∏ó‡∏µ‡∏°</button>
        </div>

        <!-- Top Controls Section -->
        <div class="flex flex-col sm:flex-row justify-between items-center gap-2 mb-4">
            <div class="flex gap-2">
                <button id="summary-button" class="panel p-3 h-full bg-purple-600 hover:bg-purple-700 rounded-lg transition flex-shrink-0">
                    <div class="flex items-center justify-center gap-2">
                        <i class="fa-solid fa-trophy text-lg"></i>
                        <span class="font-bold text-sm">‡∏™‡∏£‡∏∏‡∏õ</span>
                    </div>
                </button>
                <button id="reset-game-button" class="panel p-3 h-full bg-red-800 hover:bg-red-700 rounded-lg transition flex-shrink-0">
                    <div class="flex items-center justify-center gap-2">
                        <i class="fa-solid fa-power-off text-lg"></i>
                        <span class="font-bold text-sm">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</span>
                    </div>
                </button>
            </div>
             <!-- Bank Section -->
            <div class="panel p-2 text-center">
                <h3 class="text-xs font-bold text-green-400">üí∞ ‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ üí∞</h3>
                <p id="bank-score" class="font-pixel text-base text-green-300">1,000,000,000,000</p>
            </div>
            <div class="panel p-2 flex gap-2">
                 <button id="troll-robinhood" class="px-3 py-2 bg-green-600/50 hover:bg-green-600/80 rounded-md transition" title="‡πÇ‡∏£‡∏ö‡∏¥‡∏ô‡∏Æ‡∏π‡πâ‡∏î"><i class="fa-solid fa-user-secret"></i></button>
                 <button id="troll-blind-bet" class="px-3 py-2 bg-yellow-600/50 hover:bg-yellow-600/80 rounded-md transition" title="‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô‡∏ï‡∏≤‡∏ö‡∏≠‡∏î"><i class="fa-solid fa-eye-slash"></i></button>
                 <button id="troll-random" class="px-3 py-2 bg-red-600/50 hover:bg-red-600/80 rounded-md transition" title="‡πÇ‡∏ä‡∏Ñ‡∏ä‡∏∞‡∏ï‡∏≤"><i class="fa-solid fa-shuffle"></i></button>
            </div>
        </div>


        <!-- Special Event Banner -->
        <div id="event-banner-container" class="min-h-[50px] mb-4"></div>

        <div id="teams-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 lg:gap-6">
            <!-- Team 1 Panel -->
            <div id="team1-panel" class="panel p-4 flex flex-col items-center space-y-2" style="border-color: #38bdf8;">
                <div class="w-full flex justify-center items-center gap-2">
                    <input type="text" id="team1-name" value="Blue Team" class="team-input" style="color: #38bdf8;">
                    <span id="team1-leader-indicator" class="text-yellow-400 text-2xl"></span>
                    <input type="color" id="team1-color" value="#38bdf8" class="color-picker">
                </div>
                <p class="font-pixel text-3xl sm:text-4xl font-bold text-white break-all" id="team1-score">100,000</p>
                <p class="text-gray-400 text-sm">POINTS</p>
                <div id="team1-debt-display" class="text-red-500 font-bold text-sm min-h-[20px]"></div>
                <div class="w-full max-w-xs pt-2 space-y-2">
                    <input type="number" id="team1-manual-score" class="manual-score-input" placeholder="Add/Sub Score & Enter">
                    <div class="flex gap-2">
                         <input type="number" id="team1-buy-amount" class="manual-score-input w-1/3" placeholder="Qty">
                         <button class="w-2/3 py-2 text-sm font-bold rounded-lg bg-blue-500 hover:bg-blue-600 transition text-white" onclick="handleBuyCards(1)">
                             <i class="fa-solid fa-cart-shopping"></i> ‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡∏≤‡∏£‡πå‡∏î (50k)
                         </button>
                    </div>
                    <div class="grid grid-cols-2 gap-2">
                        <button class="w-full py-2 text-sm font-bold rounded-lg bg-yellow-500 hover:bg-yellow-600 transition text-gray-900" onclick="handleGamble(1)">
                            <i class="fa-solid fa-dice"></i> ‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô
                        </button>
                        <div id="team1-loan-container">
                            <button class="w-full py-2 text-sm font-bold rounded-lg bg-green-500 hover:bg-green-600 transition text-gray-900" onclick="handleLoan(1)">
                                <i class="fa-solid fa-hand-holding-dollar"></i> ‡∏Å‡∏π‡πâ‡∏¢‡∏∑‡∏°
                            </button>
                        </div>
                    </div>
                     <button class="w-full py-2 text-sm font-bold rounded-lg bg-gray-800 hover:bg-gray-700 border border-yellow-500 transition text-yellow-400" onclick="handleBlackMarket(1)">
                        <i class="fa-solid fa-store"></i> ‡∏ï‡∏•‡∏≤‡∏î‡∏°‡∏∑‡∏î (250k)
                    </button>
                </div>
                <div class="w-full mt-auto pt-4">
                    <input type="text" id="team1-rfid-input" class="manual-score-input font-pixel text-lg py-3" placeholder="‡πÅ‡∏ï‡∏∞‡∏Å‡∏≤‡∏£‡πå‡∏î RFID ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà">
                </div>
            </div>

            <!-- Team 2 Panel -->
            <div id="team2-panel" class="panel p-4 flex flex-col items-center space-y-2" style="border-color: #ec4899;">
                <div class="w-full flex justify-center items-center gap-2">
                    <input type="text" id="team2-name" value="Pink Team" class="team-input" style="color: #ec4899;">
                    <span id="team2-leader-indicator" class="text-yellow-400 text-2xl"></span>
                    <input type="color" id="team2-color" value="#ec4899" class="color-picker">
                </div>
                <p class="font-pixel text-3xl sm:text-4xl font-bold text-white break-all" id="team2-score">100,000</p>
                <p class="text-gray-400 text-sm">POINTS</p>
                 <div id="team2-debt-display" class="text-red-500 font-bold text-sm min-h-[20px]"></div>
                <div class="w-full max-w-xs pt-2 space-y-2">
                    <input type="number" id="team2-manual-score" class="manual-score-input" placeholder="Add/Sub Score & Enter">
                    <div class="flex gap-2">
                         <input type="number" id="team2-buy-amount" class="manual-score-input w-1/3" placeholder="Qty">
                         <button class="w-2/3 py-2 text-sm font-bold rounded-lg bg-blue-500 hover:bg-blue-600 transition text-white" onclick="handleBuyCards(2)">
                             <i class="fa-solid fa-cart-shopping"></i> ‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡∏≤‡∏£‡πå‡∏î (50k)
                         </button>
                    </div>
                     <div class="grid grid-cols-2 gap-2">
                        <button class="w-full py-2 text-sm font-bold rounded-lg bg-yellow-500 hover:bg-yellow-600 transition text-gray-900" onclick="handleGamble(2)">
                            <i class="fa-solid fa-dice"></i> ‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô
                        </button>
                        <div id="team2-loan-container">
                             <button class="w-full py-2 text-sm font-bold rounded-lg bg-green-500 hover:bg-green-600 transition text-gray-900" onclick="handleLoan(2)">
                                <i class="fa-solid fa-hand-holding-dollar"></i> ‡∏Å‡∏π‡πâ‡∏¢‡∏∑‡∏°
                            </button>
                        </div>
                    </div>
                     <button class="w-full py-2 text-sm font-bold rounded-lg bg-gray-800 hover:bg-gray-700 border border-yellow-500 transition text-yellow-400" onclick="handleBlackMarket(2)">
                        <i class="fa-solid fa-store"></i> ‡∏ï‡∏•‡∏≤‡∏î‡∏°‡∏∑‡∏î (250k)
                    </button>
                </div>
                <div class="w-full mt-auto pt-4">
                    <input type="text" id="team2-rfid-input" class="manual-score-input font-pixel text-lg py-3" placeholder="‡πÅ‡∏ï‡∏∞‡∏Å‡∏≤‡∏£‡πå‡∏î RFID ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà">
                </div>
            </div>
            
            <!-- Team 3 Panel -->
            <div id="team3-panel" class="panel p-4 flex flex-col items-center space-y-2 hidden" style="border-color: #22c55e;">
                <div class="w-full flex justify-center items-center gap-2">
                    <input type="text" id="team3-name" value="Green Team" class="team-input" style="color: #22c55e;">
                    <span id="team3-leader-indicator" class="text-yellow-400 text-2xl"></span>
                    <input type="color" id="team3-color" value="#22c55e" class="color-picker">
                </div>
                <p class="font-pixel text-3xl sm:text-4xl font-bold text-white break-all" id="team3-score">100,000</p>
                <p class="text-gray-400 text-sm">POINTS</p>
                <div id="team3-debt-display" class="text-red-500 font-bold text-sm min-h-[20px]"></div>
                <div class="w-full max-w-xs pt-2 space-y-2">
                    <input type="number" id="team3-manual-score" class="manual-score-input" placeholder="Add/Sub Score & Enter">
                    <div class="flex gap-2">
                        <input type="number" id="team3-buy-amount" class="manual-score-input w-1/3" placeholder="Qty">
                        <button class="w-2/3 py-2 text-sm font-bold rounded-lg bg-blue-500 hover:bg-blue-600 transition text-white" onclick="handleBuyCards(3)">
                            <i class="fa-solid fa-cart-shopping"></i> ‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡∏≤‡∏£‡πå‡∏î (50k)
                        </button>
                    </div>
                    <div class="grid grid-cols-2 gap-2">
                        <button class="w-full py-2 text-sm font-bold rounded-lg bg-yellow-500 hover:bg-yellow-600 transition text-gray-900" onclick="handleGamble(3)">
                            <i class="fa-solid fa-dice"></i> ‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô
                        </button>
                        <div id="team3-loan-container">
                            <button class="w-full py-2 text-sm font-bold rounded-lg bg-green-500 hover:bg-green-600 transition text-gray-900" onclick="handleLoan(3)">
                                <i class="fa-solid fa-hand-holding-dollar"></i> ‡∏Å‡∏π‡πâ‡∏¢‡∏∑‡∏°
                            </button>
                        </div>
                    </div>
                    <button class="w-full py-2 text-sm font-bold rounded-lg bg-gray-800 hover:bg-gray-700 border border-yellow-500 transition text-yellow-400" onclick="handleBlackMarket(3)">
                        <i class="fa-solid fa-store"></i> ‡∏ï‡∏•‡∏≤‡∏î‡∏°‡∏∑‡∏î (250k)
                    </button>
                </div>
                <div class="w-full mt-auto pt-4">
                    <input type="text" id="team3-rfid-input" class="manual-score-input font-pixel text-lg py-3" placeholder="‡πÅ‡∏ï‡∏∞‡∏Å‡∏≤‡∏£‡πå‡∏î RFID ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà">
                </div>
            </div>
        </div>

        <div class="mt-8">
            <div class="panel p-6">
                <h3 class="font-pixel text-xl mb-4 text-center text-yellow-400">BATTLE LOG</h3>
                <ul id="chaos-feed" class="space-y-4 h-[250px] overflow-y-auto custom-scrollbar pr-2"></ul>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="alert-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center opacity-0 pointer-events-none z-50">
        <div class="modal-content panel p-8 text-center transform scale-95 flex flex-col items-center max-w-sm">
            <div id="alert-icon" class="text-5xl mb-4"></div>
            <h3 id="alert-title" class="font-pixel text-2xl text-white mb-2"></h3>
            <p id="alert-message" class="text-gray-300 mb-6"></p>
            <div id="alert-buttons" class="flex gap-4">
                <button id="close-alert-button" class="bg-blue-600 text-white font-bold py-2 px-8 rounded-lg hover:bg-blue-700 transition">OK</button>
            </div>
        </div>
    </div>
    
    <div id="gamble-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center opacity-0 pointer-events-none z-50">
        <div class="modal-content panel p-8 text-center transform scale-95 flex flex-col items-center max-w-md w-full">
            <h3 class="font-pixel text-2xl text-white mb-4">üé≤ ‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô üé≤</h3>
            <div id="gamble-reel" class="font-pixel text-6xl text-yellow-400 my-8">000000</div>
            <div id="gamble-result" class="hidden">
                 <p class="text-gray-300 mb-6"></p>
                 <button id="close-gamble-button" class="bg-blue-600 text-white font-bold py-2 px-8 rounded-lg hover:bg-blue-700 transition">‡∏õ‡∏¥‡∏î</button>
            </div>
        </div>
    </div>
    
    <div id="summary-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center opacity-0 pointer-events-none z-50">
        <div class="modal-content panel p-8 text-center transform scale-95 flex flex-col items-center max-w-lg w-full">
            <h3 class="font-pixel text-2xl text-white mb-6">üèÜ ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏• üèÜ</h3>
            <div id="summary-content" class="space-y-4 w-full"></div>
            <div id="summary-punishment" class="border-t border-gray-700 pt-6 mt-6 w-full"></div>
            <button id="close-summary-button" class="mt-8 bg-blue-600 text-white font-bold py-2 px-8 rounded-lg hover:bg-blue-700 transition hidden">‡∏õ‡∏¥‡∏î</button>
        </div>
    </div>


    <script>
        const teams = {
            1: { name: 'Blue Team', color: '#38bdf8', score: 100000, debt: null },
            2: { name: 'Pink Team', color: '#ec4899', score: 100000, debt: null }
        };
        
        let numberOfTeams = 2;
        let bankScore = 1000000000000;

        let activeTeam = null;
        const feedEvents = [];
        let lastCardAction = { teamId: null, barcode: null };
        
        let audioCtx;
        let currentEvent = null;
        let teamStatuses = {};

        const elements = {
            mainTitle: document.getElementById('main-title'),
            teamsGrid: document.getElementById('teams-grid'),
            set2TeamsBtn: document.getElementById('set-2-teams-btn'),
            set3TeamsBtn: document.getElementById('set-3-teams-btn'),
            team1: { panel: document.getElementById('team1-panel'), name: document.getElementById('team1-name'), color: document.getElementById('team1-color'), score: document.getElementById('team1-score'), manualScore: document.getElementById('team1-manual-score'), leaderIndicator: document.getElementById('team1-leader-indicator'), debtDisplay: document.getElementById('team1-debt-display'), loanContainer: document.getElementById('team1-loan-container'), buyAmountInput: document.getElementById('team1-buy-amount'), rfidInput: document.getElementById('team1-rfid-input') },
            team2: { panel: document.getElementById('team2-panel'), name: document.getElementById('team2-name'), color: document.getElementById('team2-color'), score: document.getElementById('team2-score'), manualScore: document.getElementById('team2-manual-score'), leaderIndicator: document.getElementById('team2-leader-indicator'), debtDisplay: document.getElementById('team2-debt-display'), loanContainer: document.getElementById('team2-loan-container'), buyAmountInput: document.getElementById('team2-buy-amount'), rfidInput: document.getElementById('team2-rfid-input') },
            team3: { panel: document.getElementById('team3-panel'), name: document.getElementById('team3-name'), color: document.getElementById('team3-color'), score: document.getElementById('team3-score'), manualScore: document.getElementById('team3-manual-score'), leaderIndicator: document.getElementById('team3-leader-indicator'), debtDisplay: document.getElementById('team3-debt-display'), loanContainer: document.getElementById('team3-loan-container'), buyAmountInput: document.getElementById('team3-buy-amount'), rfidInput: document.getElementById('team3-rfid-input') },
            feed: document.getElementById('chaos-feed'),
            summaryButton: document.getElementById('summary-button'),
            resetGameButton: document.getElementById('reset-game-button'),
            trollRobinhoodButton: document.getElementById('troll-robinhood'),
            trollBlindBetButton: document.getElementById('troll-blind-bet'),
            trollRandomButton: document.getElementById('troll-random'),
            alertModal: document.getElementById('alert-modal'),
            alertIcon: document.getElementById('alert-icon'),
            alertTitle: document.getElementById('alert-title'),
            alertMessage: document.getElementById('alert-message'),
            alertButtons: document.getElementById('alert-buttons'),
            closeAlertButton: document.getElementById('close-alert-button'),
            gambleModal: document.getElementById('gamble-modal'),
            gambleReel: document.getElementById('gamble-reel'),
            gambleResult: document.getElementById('gamble-result'),
            closeGambleButton: document.getElementById('close-gamble-button'),
            eventBannerContainer: document.getElementById('event-banner-container'),
            summaryModal: document.getElementById('summary-modal'),
            summaryContent: document.getElementById('summary-content'),
            summaryPunishment: document.getElementById('summary-punishment'),
            closeSummaryButton: document.getElementById('close-summary-button'),
            bankScore: document.getElementById('bank-score'),
        };
        
        const cardDatabase = {
            '4024369498': { emoji: 'üí∞', name: '‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡πâ‡∏ô‡∏ñ‡∏∏‡∏á', description: '‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö 12,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô' },
            '3959943514': { emoji: 'üíµ', name: '‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏≠‡∏≠‡∏Å', description: '‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö 14,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô' },
            '3971035482': { emoji: 'ü§ë', name: '‡∏ñ‡∏π‡∏Å‡∏´‡∏ß‡∏¢', description: '‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö 20,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô' },
            '4012917082': { emoji: 'üè¶', name: '‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡πÉ‡∏´‡∏ç‡πà', description: '‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö 40,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô' },
            '4024373594': { emoji: 'üé≤', name: '‡∏™‡∏∏‡πà‡∏°‡πÅ‡∏ï‡πâ‡∏°‡∏ö‡∏∏‡∏ç', description: '‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô 10,000-20,000' },
            '3959947610': { emoji: 'üé∞', name: '‡πÅ‡∏à‡πá‡∏Ñ‡∏û‡∏≠‡∏ï', description: '‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô 25,000-50,000' },
            '3971039578': { emoji: 'üìà', name: '‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ó‡∏ö‡∏ï‡πâ‡∏ô', description: '‡πÇ‡∏ö‡∏ô‡∏±‡∏™ 5% ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á' },
            '4012921178': { emoji: 'üöÄ', name: '‡∏û‡∏∏‡πà‡∏á‡∏ó‡∏∞‡∏¢‡∏≤‡∏ô', description: '‡πÇ‡∏ö‡∏ô‡∏±‡∏™ 10% ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á' },
            '4024377690': { emoji: '‚ù§Ô∏è‚Äçü©π', name: '‡∏ä‡∏∏‡∏ö‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï', description: '‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡∏¥‡∏î‡∏•‡∏ö ‡∏à‡∏∞‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏µ‡πà 15,000' },
            '3959951706': { emoji: 'üòÇ', name: '‡πÄ‡∏•‡∏Ç‡∏™‡∏ß‡∏¢', description: '‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö 15,555 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô' },
            '3971043674': { emoji: '‚öñÔ∏è', name: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏õ‡∏•‡∏≠‡∏ö‡πÉ‡∏à', description: '‡∏•‡∏î‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡∏≠‡∏¢‡∏π‡πà' },
            '4012925274': { emoji: 'ü™ô', name: '‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏•', description: '‡∏£‡∏±‡∏ö‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ 1% ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ' },
            '4024381786': { emoji: 'üçÄ', name: '‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ‡∏™‡∏µ‡πà‡πÅ‡∏â‡∏Å', description: '‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö 17,777 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô' },
            '3959955802': { emoji: 'üíé', name: '‡∏Ç‡∏∏‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå', description: '‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏Å‡πâ‡∏≠‡∏ô‡πÇ‡∏ï 50,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô' },
            '4012929370': { emoji: 'ü§ù', name: '‡∏™‡∏±‡∏ô‡∏ï‡∏¥‡∏†‡∏≤‡∏û', description: '‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö 15,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô' },
            '4024385882': { emoji: 'üîÑ', name: '‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏î‡∏∏‡∏•', description: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°‡∏ñ‡∏π‡∏Å‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô' },
            '3959959898': { emoji: 'üïäÔ∏è', name: '‡∏™‡∏ô‡∏ò‡∏¥‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏™‡∏á‡∏ö‡∏®‡∏∂‡∏Å', description: '‡∏•‡πâ‡∏≤‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏°‡πà‡∏î‡∏µ‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°' },
            '3971047770': { emoji: 'üë∫', name: '‡∏°‡∏∑‡∏≠‡πÑ‡∏ß', description: '‡∏Ç‡πÇ‡∏°‡∏¢ 20,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô' },
            '4012933466': { emoji: 'ü•∑', name: '‡∏õ‡∏•‡πâ‡∏ô‡∏™‡∏∞‡∏î‡∏°', description: '‡∏õ‡∏•‡πâ‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏´‡∏ç‡πà 40,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô' },
            '4024389978': { emoji: '‚ùì', name: '‡∏•‡πâ‡∏ß‡∏á‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤', description: '‡∏™‡∏∏‡πà‡∏°‡∏Ç‡πÇ‡∏°‡∏¢ 10,000-20,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô' },
            '3959963994': { emoji: '‚ÄºÔ∏è', name: '‡∏ó‡∏∏‡∏ö‡∏Å‡∏£‡∏∞‡∏õ‡∏∏‡∏Å', description: '‡∏™‡∏∏‡πà‡∏°‡∏Ç‡πÇ‡∏°‡∏¢ 25,000-50,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô' },
            '3971051866': { emoji: 'üßõ', name: '‡∏î‡∏π‡∏î‡∏û‡∏•‡∏±‡∏á', description: '‡∏î‡∏π‡∏î‡∏û‡∏•‡∏±‡∏á 10% ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô' },
            '4012937562': { emoji: 'üí•', name: '‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏•‡πâ‡∏≤‡∏á', description: '‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ 10% ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô' },
            '4024394074': { emoji: 'üí£', name: '‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏û‡∏•‡∏µ‡∏ä‡∏µ‡∏û', description: '‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ 20% ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô' },
            '3959968090': { emoji: 'üé≠', name: '‡∏û‡∏•‡∏¥‡∏Å‡∏ä‡∏∞‡∏ï‡∏≤', description: '‡∏™‡∏•‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡∏≠‡∏¢‡∏π‡πà' },
            '3971055962': { emoji: 'üìâ', name: '‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏≤‡∏á', description: '‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 25,000' },
            '4012941658': { emoji: 'üßê', name: '‡∏†‡∏≤‡∏©‡∏µ‡∏Ñ‡∏ô‡∏£‡∏ß‡∏¢', description: '‡πÄ‡∏Å‡πá‡∏ö‡∏†‡∏≤‡∏©‡∏µ‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ô‡∏≥‡∏≠‡∏¢‡∏π‡πà' },
            '4024398170': { emoji: 'üíß', name: '‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏£‡∏±‡πà‡∏ß', description: '‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡∏£‡∏±‡πà‡∏ß‡πÑ‡∏´‡∏• 2 ‡∏ô‡∏≤‡∏ó‡∏µ' },
            '3959972186': { emoji: '‚òÑÔ∏è', name: '‡∏≠‡∏∏‡∏Å‡∏Å‡∏≤‡∏ö‡∏≤‡∏ï', description: '‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢ 35,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô' },
            '3971060058': { emoji: 'ü¶†', name: '‡πÇ‡∏£‡∏Ñ‡∏£‡∏∞‡∏ö‡∏≤‡∏î', description: '‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÅ‡∏•‡∏∞‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á' },
            '4012945754': { emoji: '‚úçÔ∏è', name: '‡πÄ‡∏î‡πá‡∏Å‡∏ù‡∏∂‡∏Å‡∏á‡∏≤‡∏ô', description: '‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏•‡∏Ç‡∏ó‡πâ‡∏≤‡∏¢‡∏™‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô' },
            '4024402266': { emoji: 'üí∏', name: '‡∏Ñ‡πà‡∏≤‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏ü‡πâ‡∏≠', description: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°‡∏ñ‡∏π‡∏Å‡∏´‡∏≤‡∏£‡∏™‡∏≠‡∏á' },
            '3959976282': { emoji: 'üßæ', name: '‡∏™‡∏£‡∏£‡∏û‡∏≤‡∏Å‡∏£‡∏•‡∏á', description: '‡∏ó‡∏µ‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏™‡∏µ‡∏¢ 30% ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô' },
            '3971064154': { emoji: 'üîÆ', name: '‡πÄ‡∏î‡∏à‡∏≤‡∏ß‡∏π', description: '‡∏ú‡∏•‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ö‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Å‡∏¥‡∏î‡∏ã‡πâ‡∏≥' },
            '4012949850': { emoji: 'üèñÔ∏è', name: '‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î', description: '‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡πå‡∏î 1 ‡∏ô‡∏≤‡∏ó‡∏µ' },
            '4024406362': { emoji: 'üé≤', name: '‡∏ß‡∏±‡∏î‡∏î‡∏ß‡∏á', description: '‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô 30,000 ‡∏•‡∏∏‡πâ‡∏ô‡∏£‡∏±‡∏ö 60,000' },
            '3959980378': { emoji: 'üé≠', name: '‡∏™‡∏ß‡∏°‡∏£‡∏≠‡∏¢', description: '‡∏Ç‡πÇ‡∏°‡∏¢‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö 2 ‡∏ô‡∏≤‡∏ó‡∏µ' },
            '3971068250': { emoji: '‚ö´', name: '‡∏´‡∏•‡∏∏‡∏°‡∏î‡∏≥', description: '‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡πÑ‡∏£‡πâ‡∏ú‡∏•' },
            '4012953946': { emoji: 'üîí', name: '‡πÑ‡∏ß‡∏£‡∏±‡∏™‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ñ‡πà‡∏≤‡πÑ‡∏ñ‡πà', description: '‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πâ‡∏°‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô' },
            '4024410458': { emoji: 'üéÅ', name: '‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏Å‡∏ß‡∏ô‡πÜ', description: '‡πÄ‡∏£‡∏≤‡πÄ‡∏™‡∏µ‡∏¢ 10,000 ‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏î‡πâ 5,000' },
            '4066906458': { emoji: 'ü§∏', name: '‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á!', description: '‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î‡∏ï‡∏ö' },
            '4077142362': { emoji: 'üí™', name: '‡πÄ‡∏ö‡πà‡∏á‡∏Å‡∏•‡πâ‡∏≤‡∏°!', description: '‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏±‡∏ô‡∏û‡∏∑‡πâ‡∏ô' },
            '4117746010': { emoji: 'üßò', name: '‡∏ó‡∏£‡∏á‡∏ï‡∏±‡∏ß!', description: '‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏û‡∏•‡∏á‡∏Ñ‡πå' },
            '4066910554': { emoji: 'üòµ‚Äçüí´', name: '‡πÇ‡∏•‡∏Å‡∏´‡∏°‡∏∏‡∏ô!', description: '‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏±‡πà‡∏ô‡∏à‡∏¥‡πâ‡∏á‡∏´‡∏£‡∏µ‡∏î' },
            '4077146458': { emoji: 'üï∫', name: '‡πÅ‡∏î‡∏ô‡∏ã‡πå!', description: '‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏ó‡πà‡∏≤‡∏ü‡∏£‡∏µ‡∏™‡πÑ‡∏ï‡∏•‡πå' },
            '4127945050': { emoji: 'üåü', name: '‡∏¢‡∏∏‡∏Ñ‡∏ó‡∏≠‡∏á', description: '‡∏ó‡∏µ‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö 500,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ!', isLegendary: true },
            '4117750106': { emoji: 'üìâ', name: '‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à', description: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡∏ñ‡∏π‡∏Å‡∏´‡∏≤‡∏£ 2 ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ!', isLegendary: true },
            '4127949146': { emoji: 'üìú', name: '‡∏•‡πâ‡∏≤‡∏á‡∏´‡∏ô‡∏µ‡πâ', description: '‡∏´‡∏ô‡∏µ‡πâ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÇ‡∏≠‡∏ô‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô!', isLegendary: true },
            '4066914650': { emoji: 'üëë', name: '‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏ä‡∏≤', description: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡∏≠‡∏¢‡∏π‡πà +1 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!', isLegendary: true },
            '4077150554': { emoji: '‚úä', name: '‡∏õ‡∏è‡∏¥‡∏ß‡∏±‡∏ï‡∏¥', description: '‡∏ó‡∏µ‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏Ç‡πÇ‡∏°‡∏¢ 50% ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏≥!', isLegendary: true },
            '4117754202': { emoji: 'üí•', name: '‡πÄ‡∏Å‡∏°‡∏®‡∏π‡∏ô‡∏¢‡πå', description: '‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 0!', isLegendary: true },
            '4127953242': { emoji: 'üôè', name: '‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå‡πÄ‡∏°‡∏ï‡∏ï‡∏≤', description: '‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö 1,000,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!', isLegendary: true },
            '0053': { emoji: ' Pandora\'s Box', name: '‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏û‡∏ô‡πÇ‡∏î‡∏£‡πà‡∏≤', description: '‡∏™‡∏∏‡πà‡∏°‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ô‡∏ï‡∏≥‡∏ô‡∏≤‡∏ô‡πÉ‡∏™‡πà‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°!', isLegendary: true },
            '4066918746': { emoji: 'üëØ', name: '‡∏†‡∏≤‡∏û‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô', description: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡∏°‡πÄ‡∏£‡∏≤!', isLegendary: true },
            '4077154650': { emoji: '‚òÑÔ∏è', name: '‡∏ß‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡πÇ‡∏•‡∏Å', description: '‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°‡πÄ‡∏™‡∏µ‡∏¢ 50% ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡πÅ‡∏ï‡πà‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏µ‡∏Å 100,000!', isLegendary: true },
            // Secret Cards Start
            '4117758298': { emoji: 'üõ°Ô∏è', name: '‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô', description: '‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏ú‡∏•‡πÄ‡∏™‡∏µ‡∏¢‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', isSecret: true },
            '4127957338': { emoji: 'üîÑ', name: '‡∏™‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö', description: '‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ', isSecret: true },
            '4066922842': { emoji: 'üèÉ‚Äç‚ôÇÔ∏è', name: '‡∏´‡∏•‡∏ö‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏†‡∏≤‡∏©‡∏µ', description: '‡∏Å‡∏≤‡∏£‡πå‡∏î \'‡∏™‡∏£‡∏£‡∏û‡∏≤‡∏Å‡∏£‡∏•‡∏á\' ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏à‡∏∞‡πÑ‡∏£‡πâ‡∏ú‡∏•‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡∏°‡πÄ‡∏£‡∏≤', isSecret: true },
            '4077158746': { emoji: 'üå±', name: '‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß', description: '‡∏à‡πà‡∏≤‡∏¢ 20,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö 100,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å 5 ‡∏ô‡∏≤‡∏ó‡∏µ', isSecret: true },
            '4117762394': { emoji: 'üéâ', name: '‡∏ñ‡∏π‡∏Å‡∏•‡πá‡∏≠‡∏ï‡πÇ‡∏ï‡πâ', description: '‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πá‡∏Ñ‡∏û‡∏≠‡∏ï 300,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£!', isSecret: true },
            '4127961434': { emoji: '‚úñÔ∏è2Ô∏è‚É£', name: '‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô', description: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ö‡∏ß‡∏Å‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏π‡∏ì‡∏™‡∏≠‡∏á', isSecret: true },
            '4066926938': { emoji: 'üè¶üí•', name: '‡∏õ‡∏•‡πâ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£', description: '‡∏Ç‡πÇ‡∏°‡∏¢ 0.0001% ‡∏Ç‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î!', isSecret: true },
            '4077162842': { emoji: 'ü™Ç', name: '‡∏£‡πà‡∏°‡∏ä‡∏π‡∏ä‡∏µ‡∏û‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥', description: '‡∏´‡∏≤‡∏Å‡∏ó‡∏µ‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡∏≠‡∏¢‡∏π‡πà', isSecret: true },
            '4127965530': { emoji: 'üåå', name: '‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•', description: '‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á -250,000 ‡∏ñ‡∏∂‡∏á +500,000!', isSecret: true },
            '4117766490': { emoji: 'üí´', name: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ß‡∏¥‡∏õ‡∏•‡∏≤‡∏™', description: '‡∏™‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°!', isSecret: true },
            '4066931034': { emoji: 'üëëüí∞', name: '‡∏Ñ‡πà‡∏≤‡πÑ‡∏ñ‡πà‡∏£‡∏≤‡∏ä‡∏≤', description: '‡∏ó‡∏µ‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡∏≠‡∏¢‡∏π‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢ 50,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°‡∏ó‡∏µ‡πà‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á', isSecret: true },
            // Secret Cards End
        };

        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
        }
        
        function playSound(type, duration = 1) {
            if (!audioCtx) return;
            const now = audioCtx.currentTime;
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            switch(type) {
                case 'scan': oscillator.type = 'sine'; oscillator.frequency.setValueAtTime(880, now); gainNode.gain.setValueAtTime(0.5, now); gainNode.gain.exponentialRampToValueAtTime(0.001, now + 0.2); break;
                case 'positive': oscillator.type = 'triangle'; oscillator.frequency.setValueAtTime(523.25, now); oscillator.frequency.linearRampToValueAtTime(1046.50, now + 0.1); gainNode.gain.setValueAtTime(0.3, now); gainNode.gain.exponentialRampToValueAtTime(0.001, now + 0.2); break;
                case 'negative': oscillator.type = 'sawtooth'; oscillator.frequency.setValueAtTime(440, now); oscillator.frequency.linearRampToValueAtTime(220, now + 0.2); gainNode.gain.setValueAtTime(0.4, now); gainNode.gain.exponentialRampToValueAtTime(0.001, now + 0.3); break;
                case 'gamble_reel':
                    oscillator.type = 'square';
                    gainNode.gain.setValueAtTime(0.1, now);
                    const notes = [261, 293, 329, 349, 392, 440, 493, 523];
                    for(let i = 0; i < duration * 10; i++) {
                        oscillator.frequency.setValueAtTime(notes[Math.floor(Math.random() * notes.length)], now + i * 0.1);
                    }
                    gainNode.gain.exponentialRampToValueAtTime(0.001, now + duration);
                    break;
                case 'end': oscillator.type = 'sawtooth'; gainNode.gain.setValueAtTime(0.5, now); oscillator.frequency.setValueAtTime(880, now); oscillator.frequency.setValueAtTime(440, now + 0.1); oscillator.frequency.setValueAtTime(880, now + 0.2); gainNode.gain.exponentialRampToValueAtTime(0.001, now + 0.5); break;
            }
            oscillator.start(now);
            oscillator.stop(now + duration);
        }
        
        function initializeTeamStatuses() {
            teamStatuses = {};
            for (let i = 1; i <= 3; i++) {
                teamStatuses[i] = {
                    isShielded: false,
                    hasCounter: false,
                    taxEvasion: false,
                    scoreMultiplier: 1,
                };
            }
        }

        function updateLeaderIndicator() {
            let maxScore = -Infinity;
            let leaders = [];
            
            const activeTeamIds = Object.keys(teams).filter(id => parseInt(id) <= numberOfTeams);

            activeTeamIds.forEach(id => {
                elements[`team${id}`].leaderIndicator.innerHTML = ''; // Clear all first
                if (teams[id].score > maxScore) {
                    maxScore = teams[id].score;
                    leaders = [id];
                } else if (teams[id].score === maxScore) {
                    leaders.push(id);
                }
            });

            // Only show crown if there's one unique leader and score is positive
            if (leaders.length === 1 && teams[leaders[0]].score > 0) {
                elements[`team${leaders[0]}`].leaderIndicator.innerHTML = '<i class="fa-solid fa-crown animate-bounce"></i>';
            }
        }

        function updateBankUI() {
            elements.bankScore.textContent = bankScore.toLocaleString();
        }

        function updateTeamUI(teamId) {
            const teamData = teams[teamId];
            const teamElements = elements[`team${teamId}`];
            teamElements.name.value = teamData.name;
            teamElements.name.style.color = teamData.color;
            teamElements.color.value = teamData.color;
            teamElements.score.innerText = teamData.score.toLocaleString();
            teamElements.panel.style.borderColor = teamData.color;
            teamElements.panel.style.boxShadow = `0 0 20px ${teamData.color}40`;
            
            teamElements.score.style.setProperty('--team-color', teamData.color);
            if (!teamElements.score.classList.contains('score-blinking')) {
                teamElements.score.classList.add('score-blinking');
            }

            if(teamData.debt) {
                teamElements.debtDisplay.textContent = `‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô: ${teamData.debt.amount.toLocaleString()}`;
                teamElements.loanContainer.innerHTML = `<button class="w-full py-2 text-sm font-bold rounded-lg bg-orange-500 hover:bg-orange-600 transition text-gray-900" onclick="handleLoan(${teamId})"><i class="fa-solid fa-cash-register"></i> ‡∏ä‡∏≥‡∏£‡∏∞‡∏´‡∏ô‡∏µ‡πâ</button>`;
            } else {
                teamElements.debtDisplay.textContent = '';
                teamElements.loanContainer.innerHTML = `<div class="flex gap-1"><input type="number" id="team${teamId}-loan-amount" class="manual-score-input w-2/3" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô"><button class="w-1/3 py-2 text-sm font-bold rounded-lg bg-green-500 hover:bg-green-600 transition text-gray-900" onclick="handleLoan(${teamId})"><i class="fa-solid fa-hand-holding-dollar"></i></button></div>`;
            }
            updateLeaderIndicator();
        }

        function renderBattleLog() {
            elements.feed.innerHTML = '';
            feedEvents.slice(0, 10).forEach(event => {
                const teamData = teams[event.teamId] || { color: '#ffffff', name: 'System' };
                const li = document.createElement('li');
                li.className = 'flex items-start space-x-3 text-sm';
                li.innerHTML = `<i class="fa-solid fa-star mt-1" style="color: ${teamData.color};"></i><p class="text-gray-300">${event.teamId ? `<strong style="color: ${teamData.color};">${teamData.name}</strong>` : ''} ${event.text}</p>`;
                elements.feed.appendChild(li);
            });
        }

        function addLog(teamId, text) { feedEvents.unshift({ teamId, text }); if (feedEvents.length > 20) feedEvents.pop(); renderBattleLog(); }
        
        function updateAllTeamUIs() {
            for (let i = 1; i <= numberOfTeams; i++) {
                if(teams[i]) updateTeamUI(i);
            }
        }

        function performCardAction(teamId, barcodeResult, isDejaVu = false) {
            const getActiveTeams = () => Object.keys(teams).filter(id => parseInt(id) <= numberOfTeams).map(Number);
            const opponentIds = getActiveTeams().filter(id => id !== teamId);
            const getLeader = () => getActiveTeams().reduce((l, id) => (teams[id].score > l.score ? { id, score: teams[id].score } : l), { id: null, score: -Infinity });

            let logText = '';
            let soundType = 'positive';
            let amount = 0;
            
            const isAttackCard = ['3971047770', '4012933466', '4024389978', '3959963994', '3971051866', '4012937562', '4024394074', '3959968090', '3971055962', '4012941658', '3959972186', '3959976282', '4024410458', '4117750106', '4117754202', '4077154650'].includes(barcodeResult);

            if (currentEvent === 'BLOOD_MOON' && isAttackCard) {
                logText += '[BLOOD MOON!] ';
            }

            switch (barcodeResult) {
                // Self-Buff cards
                case '4024369498': 
                    let gain1 = 12000; 
                    if (teamStatuses[teamId]?.scoreMultiplier > 1) { gain1 *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; }
                    teams[teamId].score += gain1; bankScore -= gain1; logText = `‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ${gain1.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`; break;
                case '3959943514': 
                    let gain2 = 14000;
                    if (teamStatuses[teamId]?.scoreMultiplier > 1) { gain2 *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; }
                    teams[teamId].score += gain2; bankScore -= gain2; logText = `‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ${gain2.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`; break;
                case '3971035482': 
                    let gain3 = 20000;
                    if (teamStatuses[teamId]?.scoreMultiplier > 1) { gain3 *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; }
                    teams[teamId].score += gain3; bankScore -= gain3; logText = `‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ${gain3.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`; break;
                case '4012917082':
                    let gain4 = 40000;
                    if (teamStatuses[teamId]?.scoreMultiplier > 1) { gain4 *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; }
                    teams[teamId].score += gain4; bankScore -= gain4; logText = `‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡πÉ‡∏´‡∏ç‡πà ${gain4.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`; break;
                case '4024373594': 
                    let r1 = Math.floor(Math.random() * 10001) + 10000; 
                    if (teamStatuses[teamId]?.scoreMultiplier > 1) { r1 *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; }
                    teams[teamId].score += r1; bankScore -= r1; logText = `‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏î‡πâ ${r1.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`; break;
                case '3959947610': 
                    let r2 = Math.floor(Math.random() * 25001) + 25000; 
                    if (teamStatuses[teamId]?.scoreMultiplier > 1) { r2 *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; }
                    teams[teamId].score += r2; bankScore -= r2; logText = `‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏î‡πâ‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡πÉ‡∏´‡∏ç‡πà ${r2.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`; break;
                case '3971039578': 
                    let g1 = Math.floor(teams[teamId].score * 0.05); 
                    if (teamStatuses[teamId]?.scoreMultiplier > 1) { g1 *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; }
                    teams[teamId].score += g1; bankScore -= g1; logText = `‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏ö‡∏ô‡∏±‡∏™ 5% ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ${g1.toLocaleString()} ‡πÅ‡∏ï‡πâ‡∏°`; break;
                case '4012921178': 
                    let g2 = Math.floor(teams[teamId].score * 0.10); 
                    if (teamStatuses[teamId]?.scoreMultiplier > 1) { g2 *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; }
                    teams[teamId].score += g2; bankScore -= g2; logText = `‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏ö‡∏ô‡∏±‡∏™ 10% ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ${g2.toLocaleString()} ‡πÅ‡∏ï‡πâ‡∏°`; break;
                case '4024377690': if (teams[teamId].score <= 0) { teams[teamId].score = 15000; bankScore -= 15000; logText = `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ü‡∏∑‡πâ‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏µ‡πà 15,000!`; } else { logText = `‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ä‡∏∏‡∏ö‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡∏Ç‡∏∂‡πâ‡∏ô`; soundType = 'negative';} break;
                case '3959951706': 
                    let gain5 = 15555;
                    if (teamStatuses[teamId]?.scoreMultiplier > 1) { gain5 *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; }
                    teams[teamId].score += gain5; bankScore -= gain5; logText = `‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏Ç‡∏™‡∏ß‡∏¢ ${gain5.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`; break;
                case '3971043674': const leaderForCatchup = getLeader(); if (leaderForCatchup.id && teams[teamId].score < leaderForCatchup.score) { let diff = Math.floor((leaderForCatchup.score - teams[teamId].score) / 2); if (teamStatuses[teamId]?.scoreMultiplier > 1) { diff *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; } teams[teamId].score += diff; bankScore -= diff; logText = `‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏õ‡∏•‡∏≠‡∏ö‡πÉ‡∏à ${diff.toLocaleString()} ‡πÅ‡∏ï‡πâ‡∏°!`; } else { logText = `‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏õ‡∏•‡∏≠‡∏ö‡πÉ‡∏à ‡πÅ‡∏ï‡πà‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ô‡∏≥‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß`; soundType = 'negative'; } break;
                case '4012925274': 
                    let interest = Math.floor(teams[teamId].score * 0.01); 
                    if (teamStatuses[teamId]?.scoreMultiplier > 1) { interest *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; }
                    teams[teamId].score += interest; bankScore -= interest; logText = `‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ 1% ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ${interest.toLocaleString()} ‡πÅ‡∏ï‡πâ‡∏°`; break;
                case '4024381786':
                    let gain6 = 17777;
                    if (teamStatuses[teamId]?.scoreMultiplier > 1) { gain6 *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; }
                    teams[teamId].score += gain6; bankScore -= gain6; logText = `‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏Ç‡∏ô‡∏≥‡πÇ‡∏ä‡∏Ñ ${gain6.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`; break;
                case '3959955802':
                    let gain7 = 50000;
                    if (teamStatuses[teamId]?.scoreMultiplier > 1) { gain7 *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; }
                    teams[teamId].score += gain7; bankScore -= gain7; logText = `‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏Å‡πâ‡∏≠‡∏ô‡πÇ‡∏ï ${gain7.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`; break;
                
                // Global cards
                case '4012929370': getActiveTeams().forEach(id => { let gain8 = 15000; if(id === teamId && teamStatuses[id]?.scoreMultiplier > 1) { gain8 *= teamStatuses[id].scoreMultiplier; addLog(id, `x${teamStatuses[id].scoreMultiplier} Multiplier!`); teamStatuses[id].scoreMultiplier = 1;} teams[id].score += gain8; bankScore -= gain8; }); teamId = null; logText = `‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö 15,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`; break;
                case '4024385882': const totalScore = getActiveTeams().reduce((sum, id) => sum + teams[id].score, 0); const avg = Math.floor(totalScore / numberOfTeams); bankScore += totalScore - (avg * numberOfTeams); getActiveTeams().forEach(id => { teams[id].score = avg; }); teamId = null; logText = `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°‡∏ñ‡∏π‡∏Å‡∏õ‡∏£‡∏±‡∏ö‡∏°‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà ${avg.toLocaleString()}!`; soundType = 'negative'; break;
                case '3959959898': teamId = null; initializeTeamStatuses(); logText = `‡∏™‡∏ô‡∏ò‡∏¥‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏™‡∏á‡∏ö‡∏®‡∏∂‡∏Å! ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ñ‡∏π‡∏Å‡∏•‡πâ‡∏≤‡∏á!`; break;
                case '4012945754': const lastTwoDigits = getActiveTeams().map(id => teams[id].score % 100); getActiveTeams().forEach((id, index) => { const nextIndex = (index + 1) % numberOfTeams; teams[id].score = (teams[id].score - (teams[id].score % 100)) + lastTwoDigits[nextIndex]; }); teamId = null; logText = `‡πÄ‡∏î‡πá‡∏Å‡∏ù‡∏∂‡∏Å‡∏á‡∏≤‡∏ô‡∏Ñ‡∏µ‡∏¢‡πå‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ú‡∏¥‡∏î! ‡πÄ‡∏•‡∏Ç‡∏ó‡πâ‡∏≤‡∏¢‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏±‡∏ô!`; soundType = 'negative'; break;
                case '4024402266': getActiveTeams().forEach(id => { const originalScore = teams[id].score; teams[id].score = Math.floor(originalScore / 2); bankScore += originalScore - teams[id].score; }); teamId = null; logText = `‡∏Ñ‡πà‡∏≤‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏ü‡πâ‡∏≠! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°‡∏ñ‡∏π‡∏Å‡∏´‡∏≤‡∏£‡∏™‡∏≠‡∏á!`; soundType = 'negative'; break;
                
                // Attack cards
                case '3971047770': 
                    amount = currentEvent === 'BLOOD_MOON' ? 30000 : 20000; let totalStolen1 = 0; opponentIds.forEach(id => { if (teamStatuses[id]?.hasCounter) { teams[teamId].score -= amount; addLog(id, `‡∏™‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö '‡∏°‡∏∑‡∏≠‡πÑ‡∏ß' ‡πÉ‡∏™‡πà ${teams[teamId].name}!`); teamStatuses[id].hasCounter = false; } else if (teamStatuses[id]?.isShielded) { addLog(id, `‡πÉ‡∏ä‡πâ‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô '‡∏°‡∏∑‡∏≠‡πÑ‡∏ß'!`); teamStatuses[id].isShielded = false; } else { teams[id].score -= amount; totalStolen1 += amount; } }); if (totalStolen1 > 0) { teams[teamId].score += totalStolen1; logText += `‡∏Ç‡πÇ‡∏°‡∏¢ ${totalStolen1.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`; } else { logText += `‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÉ‡∏ä‡πâ '‡∏°‡∏∑‡∏≠‡πÑ‡∏ß' ‡πÅ‡∏ï‡πà‡∏ñ‡∏π‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô!`; } soundType = 'negative'; break;
                case '4012933466': 
                    amount = currentEvent === 'BLOOD_MOON' ? 60000 : 40000; let totalStolen2 = 0; opponentIds.forEach(id => { if (teamStatuses[id]?.hasCounter) { teams[teamId].score -= amount; addLog(id, `‡∏™‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö '‡∏õ‡∏•‡πâ‡∏ô‡∏™‡∏∞‡∏î‡∏°' ‡πÉ‡∏™‡πà ${teams[teamId].name}!`); teamStatuses[id].hasCounter = false; } else if (teamStatuses[id]?.isShielded) { addLog(id, `‡πÉ‡∏ä‡πâ‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô '‡∏õ‡∏•‡πâ‡∏ô‡∏™‡∏∞‡∏î‡∏°'!`); teamStatuses[id].isShielded = false; } else { teams[id].score -= amount; totalStolen2 += amount; } }); if (totalStolen2 > 0) { teams[teamId].score += totalStolen2; logText += `‡∏õ‡∏•‡πâ‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏´‡∏ç‡πà! ‡∏Ç‡πÇ‡∏°‡∏¢ ${totalStolen2.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`; } else { logText += `‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏° '‡∏õ‡∏•‡πâ‡∏ô‡∏™‡∏∞‡∏î‡∏°' ‡πÅ‡∏ï‡πà‡∏ñ‡∏π‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô!`; } soundType = 'negative'; break;
                case '4024389978': 
                    amount = Math.floor(Math.random() * 10001) + 10000; if(currentEvent === 'BLOOD_MOON') amount = Math.floor(amount*1.5); let totalStolen3 = 0; opponentIds.forEach(id => { if (teamStatuses[id]?.hasCounter) { teams[teamId].score -= amount; addLog(id, `‡∏™‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö '‡∏•‡πâ‡∏ß‡∏á‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤' ‡πÉ‡∏™‡πà ${teams[teamId].name}!`); teamStatuses[id].hasCounter = false; } else if (teamStatuses[id]?.isShielded) { addLog(id, `‡πÉ‡∏ä‡πâ‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô '‡∏•‡πâ‡∏ß‡∏á‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤'!`); teamStatuses[id].isShielded = false; } else { teams[id].score -= amount; totalStolen3 += amount; } }); if (totalStolen3 > 0) { teams[teamId].score += totalStolen3; logText += `‡∏™‡∏∏‡πà‡∏°‡∏Ç‡πÇ‡∏°‡∏¢ ${totalStolen3.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`; } else { logText += `‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏° '‡∏•‡πâ‡∏ß‡∏á‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤' ‡πÅ‡∏ï‡πà‡∏ñ‡∏π‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô!`; } soundType = 'negative'; break;
                case '3959963994':
                    amount = Math.floor(Math.random() * 25001) + 25000; if(currentEvent === 'BLOOD_MOON') amount = Math.floor(amount*1.5); let totalStolen4 = 0; opponentIds.forEach(id => { if (teamStatuses[id]?.hasCounter) { teams[teamId].score -= amount; addLog(id, `‡∏™‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö '‡∏ó‡∏∏‡∏ö‡∏Å‡∏£‡∏∞‡∏õ‡∏∏‡∏Å' ‡πÉ‡∏™‡πà ${teams[teamId].name}!`); teamStatuses[id].hasCounter = false; } else if (teamStatuses[id]?.isShielded) { addLog(id, `‡πÉ‡∏ä‡πâ‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô '‡∏ó‡∏∏‡∏ö‡∏Å‡∏£‡∏∞‡∏õ‡∏∏‡∏Å'!`); teamStatuses[id].isShielded = false; } else { teams[id].score -= amount; totalStolen4 += amount; } }); if (totalStolen4 > 0) { teams[teamId].score += totalStolen4; logText += `‡∏™‡∏∏‡πà‡∏°‡∏Ç‡πÇ‡∏°‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏´‡∏ç‡πà ${totalStolen4.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`; } else { logText += `‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏° '‡∏ó‡∏∏‡∏ö‡∏Å‡∏£‡∏∞‡∏õ‡∏∏‡∏Å' ‡πÅ‡∏ï‡πà‡∏ñ‡∏π‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô!`; } soundType = 'negative'; break;
                case '3971051866': 
                    let totalDrained = 0; opponentIds.forEach(id => { amount = Math.floor(teams[id].score * (currentEvent === 'BLOOD_MOON' ? 0.15 : 0.10)); if (teamStatuses[id]?.hasCounter) { teams[teamId].score -= amount; addLog(id, `‡∏™‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö '‡∏î‡∏π‡∏î‡∏û‡∏•‡∏±‡∏á' ‡πÉ‡∏™‡πà ${teams[teamId].name}!`); teamStatuses[id].hasCounter = false; } else if (teamStatuses[id]?.isShielded) { addLog(id, `‡πÉ‡∏ä‡πâ‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô '‡∏î‡∏π‡∏î‡∏û‡∏•‡∏±‡∏á'!`); teamStatuses[id].isShielded = false; } else { teams[id].score -= amount; totalDrained += amount; } }); if (totalDrained > 0) { teams[teamId].score += totalDrained; logText += `‡∏î‡∏π‡∏î‡∏û‡∏•‡∏±‡∏á ${totalDrained.toLocaleString()} ‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô!`; } else { logText += `‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏° '‡∏î‡∏π‡∏î‡∏û‡∏•‡∏±‡∏á' ‡πÅ‡∏ï‡πà‡∏ñ‡∏π‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô!`; } soundType = 'negative'; break;
                case '4012937562':
                    logText += `‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ 10% ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô!`; opponentIds.forEach(id => { amount = Math.floor(teams[id].score * (currentEvent === 'BLOOD_MOON' ? 0.15 : 0.10)); if (teamStatuses[id]?.hasCounter) { teams[teamId].score -= amount; bankScore += amount; addLog(id, `‡∏™‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö '‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏•‡πâ‡∏≤‡∏á' ‡πÉ‡∏™‡πà ${teams[teamId].name}!`); teamStatuses[id].hasCounter = false; } else if (teamStatuses[id]?.isShielded) { addLog(id, `‡πÉ‡∏ä‡πâ‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô '‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏•‡πâ‡∏≤‡∏á'!`); teamStatuses[id].isShielded = false; } else { teams[id].score -= amount; bankScore += amount; } }); soundType = 'negative'; break;
                case '4024394074':
                    logText += `‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ 20% ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô!`; opponentIds.forEach(id => { amount = Math.floor(teams[id].score * (currentEvent === 'BLOOD_MOON' ? 0.30 : 0.20)); if (teamStatuses[id]?.hasCounter) { teams[teamId].score -= amount; bankScore += amount; addLog(id, `‡∏™‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö '‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏û‡∏•‡∏µ‡∏ä‡∏µ‡∏û' ‡πÉ‡∏™‡πà ${teams[teamId].name}!`); teamStatuses[id].hasCounter = false; } else if (teamStatuses[id]?.isShielded) { addLog(id, `‡πÉ‡∏ä‡πâ‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô '‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏û‡∏•‡∏µ‡∏ä‡∏µ‡∏û'!`); teamStatuses[id].isShielded = false; } else { teams[id].score -= amount; bankScore += amount; } }); soundType = 'negative'; break;
                case '3959968090': 
                    const leaderToSwap = getLeader(); if (leaderToSwap.id && leaderToSwap.id !== teamId) { if (teamStatuses[leaderToSwap.id]?.isShielded) { addLog(leaderToSwap.id, `‡πÉ‡∏ä‡πâ‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô '‡∏û‡∏•‡∏¥‡∏Å‡∏ä‡∏∞‡∏ï‡∏≤'!`); teamStatuses[leaderToSwap.id].isShielded = false; logText = '‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏™‡∏•‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡πÅ‡∏ï‡πà‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏ß‡πâ‡πÑ‡∏î‡πâ!'; } else { [teams[teamId].score, teams[leaderToSwap.id].score] = [teams[leaderToSwap.id].score, teams[teamId].score]; logText = `‡∏û‡∏•‡∏¥‡∏Å‡∏ä‡∏∞‡∏ï‡∏≤! ‡∏™‡∏•‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡∏°‡∏ú‡∏π‡πâ‡∏ô‡∏≥ (${teams[leaderToSwap.id].name})!`; } soundType = 'negative'; } else { logText = `‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏™‡∏•‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡πÅ‡∏ï‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô`; soundType = 'negative'; } break;
                case '3971055962':
                    logText = `‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 25,000!`; opponentIds.forEach(id => { if (teamStatuses[id]?.hasCounter) { addLog(id, `'‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏≤‡∏á' ‡∏ñ‡∏π‡∏Å‡∏™‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏Å‡∏±‡∏ö ${teams[teamId].name}!`); teamStatuses[id].hasCounter = false; } else if (teamStatuses[id]?.isShielded) { addLog(id, `‡πÉ‡∏ä‡πâ‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô '‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏≤‡∏á'!`); teamStatuses[id].isShielded = false; } else { if (teams[id].score > 25000) { bankScore += teams[id].score - 25000; teams[id].score = 25000; } } }); soundType = 'negative'; break;
                case '4012941658':
                    const leaderToTax = getLeader(); if (leaderToTax.id && leaderToTax.id !== teamId) { if (teamStatuses[leaderToTax.id]?.isShielded) { addLog(leaderToTax.id, `‡πÉ‡∏ä‡πâ‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô '‡∏†‡∏≤‡∏©‡∏µ‡∏Ñ‡∏ô‡∏£‡∏ß‡∏¢'!`); teamStatuses[leaderToTax.id].isShielded = false; logText = '‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏Å‡πá‡∏ö‡∏†‡∏≤‡∏©‡∏µ ‡πÅ‡∏ï‡πà‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏ß‡πâ‡πÑ‡∏î‡πâ!'; } else { amount = Math.floor((leaderToTax.score - teams[teamId].score) * (currentEvent === 'BLOOD_MOON' ? 0.225 : 0.15)); teams[teamId].score += amount; teams[leaderToTax.id].score -= amount; logText += `‡πÄ‡∏Å‡πá‡∏ö‡∏†‡∏≤‡∏©‡∏µ‡∏Ñ‡∏ô‡∏£‡∏ß‡∏¢! ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ${amount.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡∏° ${teams[leaderToTax.id].name}!`; } } else { logText = `‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏Å‡πá‡∏ö‡∏†‡∏≤‡∏©‡∏µ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`; soundType = 'negative'; } break;
                case '3959972186':
                    amount = currentEvent === 'BLOOD_MOON' ? 52500 : 35000; logText += `‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô! ‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢ ${amount.toLocaleString()} ‡πÅ‡∏ï‡πâ‡∏°!`; opponentIds.forEach(id => { if (teamStatuses[id]?.hasCounter) { teams[teamId].score -= amount; bankScore += amount; addLog(id, `‡∏™‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö '‡∏≠‡∏∏‡∏Å‡∏Å‡∏≤‡∏ö‡∏≤‡∏ï' ‡πÉ‡∏™‡πà ${teams[teamId].name}!`); teamStatuses[id].hasCounter = false; } else if (teamStatuses[id]?.isShielded) { addLog(id, `‡πÉ‡∏ä‡πâ‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô '‡∏≠‡∏∏‡∏Å‡∏Å‡∏≤‡∏ö‡∏≤‡∏ï'!`); teamStatuses[id].isShielded = false; } else { teams[id].score -= amount; bankScore += amount; } }); soundType = 'negative'; break;
                case '3959976282': 
                    const leaderForIRS = getLeader(); const scores = getActiveTeams().map(id => teams[id].score); const isTie = scores.filter(s => s === leaderForIRS.score).length > 1; if (leaderForIRS.id && !isTie) { if (teamStatuses[leaderForIRS.id]?.taxEvasion) { logText += `‡∏™‡∏£‡∏£‡∏û‡∏≤‡∏Å‡∏£‡∏•‡∏á! ‡πÅ‡∏ï‡πà‡∏ó‡∏µ‡∏°‡∏ú‡∏π‡πâ‡∏ô‡∏≥ (${teams[leaderForIRS.id].name}) ‡∏´‡∏•‡∏ö‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏†‡∏≤‡∏©‡∏µ‡πÑ‡∏î‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!`; teamStatuses[leaderForIRS.id].taxEvasion = false; teamId = null; } else if (teamStatuses[leaderForIRS.id]?.isShielded) { logText += `‡∏™‡∏£‡∏£‡∏û‡∏≤‡∏Å‡∏£‡∏•‡∏á! ‡πÅ‡∏ï‡πà‡∏ó‡∏µ‡∏°‡∏ú‡∏π‡πâ‡∏ô‡∏≥ (${teams[leaderForIRS.id].name}) ‡πÉ‡∏ä‡πâ‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏ß‡πâ‡πÑ‡∏î‡πâ!`; teamStatuses[leaderForIRS.id].isShielded = false; teamId = null; } else { amount = Math.floor(teams[leaderForIRS.id].score * (currentEvent === 'BLOOD_MOON' ? 0.45 : 0.30)); teams[leaderForIRS.id].score -= amount; bankScore += amount; logText += `‡∏™‡∏£‡∏£‡∏û‡∏≤‡∏Å‡∏£‡∏•‡∏á! ‡∏ó‡∏µ‡∏°‡∏ú‡∏π‡πâ‡∏ô‡∏≥ (${teams[leaderForIRS.id].name}) ‡πÇ‡∏î‡∏ô‡∏´‡∏±‡∏Å ${amount.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`; teamId = null; soundType = 'negative'; } } else { logText = `‡∏™‡∏£‡∏£‡∏û‡∏≤‡∏Å‡∏£‡∏°‡∏≤ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡πÄ‡∏•‡∏¢‡∏£‡∏≠‡∏î‡∏ï‡∏±‡∏ß‡πÑ‡∏õ!`; teamId = null; } break;
                case '4024410458': opponentIds.forEach(id => teams[id].score += 5000); teams[teamId].score -= 10000; bankScore += (10000 - 5000 * opponentIds.length); logText = `‡∏°‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏Å‡∏ß‡∏ô‡πÜ! ‡∏ó‡∏µ‡∏°‡πÄ‡∏£‡∏≤‡πÄ‡∏™‡∏µ‡∏¢ 10,000 ‡πÅ‡∏ï‡πà‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö 5,000!`; soundType = 'negative'; break;
                
                // Legendary cards
                case '4127945050': 
                    let legendaryGain1 = 500000; 
                    if (teamStatuses[teamId]?.scoreMultiplier > 1) { legendaryGain1 *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; }
                    teams[teamId].score += legendaryGain1; bankScore -= legendaryGain1; logText = `‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏¢‡∏∏‡∏Ñ‡∏ó‡∏≠‡∏á! ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ${legendaryGain1.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`; break;
                case '4117750106':
                    logText = `‡πÄ‡∏Å‡∏¥‡∏î‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à!`; opponentIds.forEach(id => { if (teamStatuses[id]?.hasCounter) { addLog(id, `'‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à' ‡∏ñ‡∏π‡∏Å‡∏™‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏Å‡∏±‡∏ö ${teams[teamId].name}!`); teamStatuses[id].hasCounter = false; } else if (teamStatuses[id]?.isShielded) { addLog(id, `‡πÉ‡∏ä‡πâ‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô '‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à'!`); teamStatuses[id].isShielded = false; } else { const original = teams[id].score; teams[id].score = Math.floor(original / 2); bankScore += original - teams[id].score; } }); soundType = 'negative'; break;
                case '4127949146':
                    if (teams[teamId].debt) { if (opponentIds.length > 0) { const unluckyOpponentId = opponentIds[Math.floor(Math.random() * opponentIds.length)]; const debtAmount = teams[teamId].debt.amount; clearInterval(teams[teamId].debt.interval); teams[teamId].debt = null; if (teams[unluckyOpponentId].debt) { clearInterval(teams[unluckyOpponentId].debt.interval); } teams[unluckyOpponentId].debt = { principal: debtAmount, amount: debtAmount, interval: setInterval(() => { const interest = Math.floor(teams[unluckyOpponentId].debt.principal * 0.20); teams[unluckyOpponentId].debt.amount += interest; addLog(unluckyOpponentId, `‡πÇ‡∏î‡∏ô‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ ${interest.toLocaleString()}! ‡∏¢‡∏≠‡∏î‡∏´‡∏ô‡∏µ‡πâ‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô ${teams[unluckyOpponentId].debt.amount.toLocaleString()}`); updateTeamUI(unluckyOpponentId); }, 600000) }; logText = `‡∏•‡πâ‡∏≤‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏´‡∏ô‡∏µ‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ñ‡∏π‡∏Å‡πÇ‡∏≠‡∏ô‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡∏ó‡∏µ‡∏° ${teams[unluckyOpponentId].name}!`; soundType = 'negative'; } else { logText = `‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÇ‡∏≠‡∏ô‡∏´‡∏ô‡∏µ‡πâ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô!`; soundType = 'negative'; } } else { logText = `‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏•‡πâ‡∏≤‡∏á‡∏´‡∏ô‡∏µ‡πâ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô!`; soundType = 'negative'; } break;
                case '4066914650': 
                    const leaderToOvertake = getLeader(); if (leaderToOvertake.id && teams[teamId].score < leaderToOvertake.score) { let gain9 = (leaderToOvertake.score + 1) - teams[teamId].score; if (teamStatuses[teamId]?.scoreMultiplier > 1) { gain9 *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; } teams[teamId].score += gain9; bankScore -= gain9; logText = `‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≤‡∏ä‡∏≤! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ñ‡∏π‡∏Å‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ã‡∏á‡∏ú‡∏π‡πâ‡∏ô‡∏≥!`; } else { logText = `‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏ä‡∏≤ ‡πÅ‡∏ï‡πà‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ô‡∏≥‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß!`; soundType = 'negative'; } break;
                case '4077150554':
                    const sortedTeams = getActiveTeams().map(id => ({ id: parseInt(id), score: teams[id].score })).sort((a, b) => a.score - b.score); if (sortedTeams.length > 1) { const trailer = sortedTeams[0]; const leader = sortedTeams[sortedTeams.length - 1]; if (trailer.id !== leader.id && teamId === trailer.id) { if (teamStatuses[leader.id]?.isShielded) { logText = `‡∏õ‡∏è‡∏¥‡∏ß‡∏±‡∏ï‡∏¥‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß! ‡∏ó‡∏µ‡∏° ${teams[leader.id].name} ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏ß‡πâ‡πÑ‡∏î‡πâ!`; teamStatuses[leader.id].isShielded = false; } else { amount = Math.floor(teams[leader.id].score * 0.5); teams[trailer.id].score += amount; teams[leader.id].score -= amount; logText = `‡∏õ‡∏è‡∏¥‡∏ß‡∏±‡∏ï‡∏¥! ‡∏ó‡∏µ‡∏° ${teams[trailer.id].name} ‡∏Ç‡πÇ‡∏°‡∏¢ 50% ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡∏° ${teams[leader.id].name}!`; } } else { logText = `‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏õ‡∏è‡∏¥‡∏ß‡∏±‡∏ï‡∏¥‡πÅ‡∏ï‡πà‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ô‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)`; soundType = 'negative'; } } else { logText = `‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏õ‡∏è‡∏¥‡∏ß‡∏±‡∏ï‡∏¥‡πÅ‡∏ï‡πà‡∏°‡∏µ‡∏ó‡∏µ‡∏°‡πÄ‡∏î‡∏µ‡∏¢‡∏ß!`; soundType = 'negative'; } break;
                case '4117754202':
                    logText = `‡πÄ‡∏Å‡∏°‡∏®‡∏π‡∏ô‡∏¢‡πå!`; opponentIds.forEach(id => { if (teamStatuses[id]?.hasCounter) { addLog(id, `'‡πÄ‡∏Å‡∏°‡∏®‡∏π‡∏ô‡∏¢‡πå' ‡∏ñ‡∏π‡∏Å‡∏™‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏Å‡∏±‡∏ö ${teams[teamId].name}!`); teamStatuses[id].hasCounter = false; } else if (teamStatuses[id]?.isShielded) { addLog(id, `‡πÉ‡∏ä‡πâ‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô '‡πÄ‡∏Å‡∏°‡∏®‡∏π‡∏ô‡∏¢‡πå'!`); teamStatuses[id].isShielded = false; } else { bankScore += teams[id].score; teams[id].score = 0; } }); soundType = 'negative'; break;
                case '4127953242':
                    let legendaryGain2 = 1000000;
                    if (teamStatuses[teamId]?.scoreMultiplier > 1) { legendaryGain2 *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; }
                    teams[teamId].score += legendaryGain2; bankScore -= legendaryGain2; logText = `‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå‡πÄ‡∏°‡∏ï‡∏ï‡∏≤! ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ${legendaryGain2.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`; break;
                case '0053': teamId = null; logText = `‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏û‡∏ô‡πÇ‡∏î‡∏£‡πà‡∏≤!`; soundType = 'negative'; setTimeout(() => { const legendaryCards = Object.keys(cardDatabase).filter(k => cardDatabase[k].isLegendary && k !== '0053'); getActiveTeams().forEach((id, index) => { setTimeout(() => { let card = legendaryCards[Math.floor(Math.random() * legendaryCards.length)]; addLog(null, `‡∏ó‡∏µ‡∏° ${teams[id].name} ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏à‡∏≤‡∏Å: ${cardDatabase[card].name}!`); performCardAction(id, card); }, (index + 1) * 2000); }); }, 1000); playSound(soundType); addLog(teamId, logText); if (!isDejaVu) { lastCardAction = { teamId, barcode: barcodeResult }; } return;
                case '4066918746':
                    logText = `‡∏†‡∏≤‡∏û‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô!`; opponentIds.forEach(id => { if (teamStatuses[id]?.isShielded) { addLog(id, `‡πÉ‡∏ä‡πâ‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô '‡∏†‡∏≤‡∏û‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô'!`); teamStatuses[id].isShielded = false; } else { const diff = teams[teamId].score - teams[id].score; bankScore -= diff; teams[id].score = teams[teamId].score; } }); soundType = 'negative'; break;
                case '4077154650': getActiveTeams().forEach(id => { const loss = Math.floor(teams[id].score * 0.5); teams[id].score -= loss; bankScore += loss; }); opponentIds.forEach(id => { if(!teamStatuses[id]?.isShielded){ teams[id].score -= 100000; bankScore += 100000; } else { addLog(id, `‡πÉ‡∏ä‡πâ‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏à‡∏≤‡∏Å '‡∏ß‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡πÇ‡∏•‡∏Å'!`); teamStatuses[id].isShielded = false;} }); logText = `‡∏ß‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡πÇ‡∏•‡∏Å! ‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°‡πÄ‡∏™‡∏µ‡∏¢ 50% ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡πÅ‡∏•‡∏∞‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏µ‡∏Å 100,000!`; soundType = 'negative'; break;

                // Simple cards
                case '3971064154': if (lastCardAction.barcode) { addLog(null, `‡πÄ‡∏î‡∏à‡∏≤‡∏ß‡∏π! ‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ö‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á!`); performCardAction(lastCardAction.teamId, lastCardAction.barcode, true); return; } else { logText = `‡πÉ‡∏ä‡πâ‡πÄ‡∏î‡∏à‡∏≤‡∏ß‡∏π ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤...`; teamId = null; soundType = 'negative';} break;
                case '4024406362': if (teams[teamId].score >= 30000) { teams[teamId].score -= 30000; bankScore += 30000; if (Math.random() < 0.5) { let gain10 = 60000; if (teamStatuses[teamId]?.scoreMultiplier > 1) { gain10 *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; } teams[teamId].score += gain10; bankScore -= gain10; logText = `‡∏ß‡∏±‡∏î‡∏î‡∏ß‡∏á... ‡πÅ‡∏•‡∏∞‡∏ä‡∏ô‡∏∞! ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ${gain10.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`; } else { logText = `‡∏ß‡∏±‡∏î‡∏î‡∏ß‡∏á... ‡πÅ‡∏•‡∏∞‡πÅ‡∏û‡πâ! ‡πÄ‡∏™‡∏µ‡∏¢ 30,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏õ‡∏ü‡∏£‡∏µ‡πÜ!`; soundType = 'negative'; } } else { logText = `‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ß‡∏±‡∏î‡∏î‡∏ß‡∏á ‡πÅ‡∏ï‡πà‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠!`; soundType = 'negative'; } break;
                case '3971068250': lastCardAction.barcode = 'BLOCKED'; logText = `‡∏´‡∏•‡∏∏‡∏°‡∏î‡∏≥! ‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡∏°‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏à‡∏∞‡πÑ‡∏£‡πâ‡∏ú‡∏•!`; soundType = 'negative'; break;
                // Cards with no score effect but need logging
                case '4024398170': case '3971060058': case '4012949850': case '3959980378': case '4012953946': logText = `${cardDatabase[barcodeResult].name}!`; soundType = 'negative'; break;
                case '4066906458': case '4077142362': case '4117746010': case '4066910554': case '4077146458': const reps = Math.floor(Math.random() * 21) + 10; let unit = '‡∏Ñ‡∏£‡∏±‡πâ‡∏á'; if (barcodeResult === '4117746010' || barcodeResult === '4077146458') unit = '‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ'; if (barcodeResult === '4066910554') unit = '‡∏£‡∏≠‡∏ö'; logText = `‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô ${cardDatabase[barcodeResult].description.replace('‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô‡∏ï‡πâ‡∏≠‡∏á', '')} ${reps} ${unit}!`; soundType = 'negative'; break;

                // Secret cards
                case '4117758298': teamStatuses[teamId].isShielded = true; logText = `‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÇ‡∏•‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô!`; break;
                case '4127957338': teamStatuses[teamId].hasCounter = true; logText = `‡∏ï‡∏±‡πâ‡∏á‡∏ó‡πà‡∏≤‡∏™‡∏ß‡∏ô‡∏Å‡∏•‡∏±‡∏ö!`; break;
                case '4066922842': teamStatuses[teamId].taxEvasion = true; logText = `‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏´‡∏•‡∏ö‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏†‡∏≤‡∏©‡∏µ!`; break;
                case '4077158746': if (teams[teamId].score >= 20000) { teams[teamId].score -= 20000; bankScore += 20000; logText = `‡∏•‡∏á‡∏ó‡∏∏‡∏ô 20,000 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô... ‡∏≠‡∏µ‡∏Å 5 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏°‡∏≤‡∏£‡∏≠‡∏•‡∏∏‡πâ‡∏ô‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô!`; setTimeout(() => { let investmentReturn = 100000; if(teamStatuses[teamId]?.scoreMultiplier > 1){ investmentReturn *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier on Investment!`); teamStatuses[teamId].scoreMultiplier = 1; } teams[teamId].score += investmentReturn; bankScore -= investmentReturn; addLog(teamId, `‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏ô‡∏ú‡∏• ${investmentReturn.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`); playSound('positive'); updateTeamUI(teamId); updateBankUI(); }, 300000); } else { logText = `‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏•‡∏á‡∏ó‡∏∏‡∏ô ‡πÅ‡∏ï‡πà‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠!`; soundType = 'negative'; } break;
                case '0004526426': let prizeAmount = 300000; if (teamStatuses[teamId]?.scoreMultiplier > 1) { prizeAmount *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; } teams[teamId].score += prizeAmount; bankScore -= prizeAmount; logText = `‡∏ñ‡∏π‡∏Å‡∏•‡πá‡∏≠‡∏ï‡πÇ‡∏ï‡πâ! ‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πá‡∏Ñ‡∏û‡∏≠‡∏ï ${prizeAmount.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`; break;
                case '4127961434': teamStatuses[teamId].scoreMultiplier = 2; logText = `‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô! ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ö‡∏ß‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏ú‡∏• x2!`; break;
                case '4066926938': let heistAmount = Math.floor(bankScore * 0.000001); if (teamStatuses[teamId]?.scoreMultiplier > 1) { heistAmount *= teamStatuses[teamId].scoreMultiplier; addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier!`); teamStatuses[teamId].scoreMultiplier = 1; } teams[teamId].score += heistAmount; bankScore -= heistAmount; logText = `‡∏õ‡∏•‡πâ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ç‡πÇ‡∏°‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏≤‡πÑ‡∏î‡πâ ${heistAmount.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`; break;
                case '4077162842':
                    const sortedTeamsForParachute = getActiveTeams().map(id => ({ id, score: teams[id].score })).sort((a, b) => a.score - b.score);
                    if (sortedTeamsForParachute[0].id === teamId && sortedTeamsForParachute.length > 1) {
                        const leaderScore = sortedTeamsForParachute[sortedTeamsForParachute.length - 1].score;
                        const targetScore = Math.floor(leaderScore / 2);
                        const scoreGained = targetScore - teams[teamId].score;
                        if (scoreGained > 0) {
                            teams[teamId].score += scoreGained;
                            bankScore -= scoreGained;
                            logText = `‡∏£‡πà‡∏°‡∏ä‡∏π‡∏ä‡∏µ‡∏û‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏á‡∏≤‡∏ô! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏û‡∏∏‡πà‡∏á‡πÑ‡∏õ‡∏ó‡∏µ‡πà ${targetScore.toLocaleString()}!`;
                        } else {
                            logText = `‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏°‡∏ä‡∏π‡∏ä‡∏µ‡∏û‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥ ‡πÅ‡∏ï‡πà‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ!`;
                            soundType = 'negative';
                        }
                    } else {
                        logText = `‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏°‡∏ä‡∏π‡∏ä‡∏µ‡∏û‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢!`;
                        soundType = 'negative';
                    }
                    break;
                case '4127965530':
                    const cosmicGambleAmount = Math.floor(Math.random() * 750001) - 250000;
                    teams[teamId].score += cosmicGambleAmount;
                    bankScore -= cosmicGambleAmount;
                    if (cosmicGambleAmount >= 0) {
                        logText = `‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•! ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ${cosmicGambleAmount.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`;
                    } else {
                        logText = `‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô‡∏à‡∏±‡∏Å‡∏£‡∏ß‡∏≤‡∏•! ‡πÄ‡∏™‡∏µ‡∏¢ ${Math.abs(cosmicGambleAmount).toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`;
                        soundType = 'negative';
                    }
                    break;
                case '4117766490':
                    const activeIds = getActiveTeams();
                    const currentScores = activeIds.map(id => teams[id].score);
                    // Fisher-Yates shuffle
                    for (let i = currentScores.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [currentScores[i], currentScores[j]] = [currentScores[j], currentScores[i]];
                    }
                    activeIds.forEach((id, index) => {
                        teams[id].score = currentScores[index];
                    });
                    logText = `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ß‡∏¥‡∏õ‡∏•‡∏≤‡∏™! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°‡∏ñ‡∏π‡∏Å‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏±‡∏ô‡∏°‡∏±‡πà‡∏ß!`;
                    teamId = null; // System event
                    soundType = 'negative';
                    break;
                case '4066931034': const leaderForRansom = getLeader(); if (leaderForRansom.id && teamId !== leaderForRansom.id) { logText = `‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏Ñ‡πà‡∏≤‡πÑ‡∏ñ‡πà ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≤‡∏ä‡∏≤!`; soundType = 'negative'; break; } const followers = getActiveTeams().filter(id => teams[id].score < teams[teamId].score); if (followers.length > 0) { const ransomPerTeam = 50000; const totalRansom = ransomPerTeam * followers.length; if (teams[teamId].score >= totalRansom) { teams[teamId].score -= totalRansom; followers.forEach(id => { teams[id].score += ransomPerTeam; }); logText = `‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≤‡∏ä‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢! ‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡πÑ‡∏ñ‡πà ${totalRansom.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏´‡πâ‡∏ó‡∏µ‡∏°‡∏≠‡∏∑‡πà‡∏ô!`; soundType = 'negative'; } else { logText = `‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡πÑ‡∏ñ‡πà ‡πÅ‡∏ï‡πà‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠!`; soundType = 'negative'; } } else { logText = `‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≤‡∏ä‡∏≤‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏Ñ‡∏£‡πÉ‡∏´‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡πÑ‡∏ñ‡πà!`; } break;

                default: logText = `‡∏™‡πÅ‡∏Å‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î "${barcodeResult}" ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å`; soundType = 'negative'; break;
            }
            
            playSound(soundType);
            addLog(teamId, logText);
            if (!isDejaVu) {
                lastCardAction = { teamId, barcode: barcodeResult };
            }

            updateAllTeamUIs();
            updateBankUI();
        }

        function showCardInfo(barcode) {
            const card = cardDatabase[barcode];
            if (card) {
                let description = card.description;
                showCustomAlert(card.name, description, card.emoji);
                setTimeout(() => {
                    closeCustomAlert();
                    performCardAction(activeTeam, barcode);
                }, 4000);
            } else {
                performCardAction(activeTeam, barcode);
            }
        }

        function handleRfidInput(event, teamId) {
            if (event.key === 'Enter') {
                initAudio();
                const rfidValue = event.target.value;
                if (rfidValue) {
                    if (lastCardAction.barcode === 'BLOCKED' && lastCardAction.teamId === teamId) {
                        addLog(teamId, "‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ñ‡∏π‡∏Å‡∏ö‡∏•‡πá‡∏≠‡∏Ñ‡πÇ‡∏î‡∏¢‡∏´‡∏•‡∏∏‡∏°‡∏î‡∏≥!");
                        playSound('negative');
                        lastCardAction.barcode = null; // Reset block
                        event.target.value = '';
                        return;
                    }
                    playSound('scan');
                    activeTeam = teamId;
                    showCardInfo(rfidValue);
                    event.target.value = '';
                }
            }
        }

        function showCustomAlert(title, message, icon) {
            elements.alertTitle.textContent = title;
            elements.alertMessage.textContent = message;
            elements.alertIcon.innerHTML = `<div class="text-5xl">${icon}</div>`;
            elements.alertButtons.innerHTML = `<button id="close-alert-button" class="bg-blue-600 text-white font-bold py-2 px-8 rounded-lg hover:bg-blue-700 transition">OK</button>`;
            document.getElementById('close-alert-button').onclick = closeCustomAlert;
            elements.alertModal.classList.remove('opacity-0', 'pointer-events-none');
        }

        function showCustomConfirm(title, message, icon, onConfirm) {
             elements.alertTitle.textContent = title;
            elements.alertMessage.textContent = message;
            elements.alertIcon.innerHTML = `<div class="text-5xl">${icon}</div>`;
            elements.alertButtons.innerHTML = `
                <button id="confirm-yes" class="bg-green-600 text-white font-bold py-2 px-8 rounded-lg hover:bg-green-700 transition">Yes</button>
                <button id="confirm-no" class="bg-red-600 text-white font-bold py-2 px-8 rounded-lg hover:bg-red-700 transition">No</button>
            `;
            document.getElementById('confirm-yes').onclick = () => {
                onConfirm();
                closeCustomAlert();
            };
            document.getElementById('confirm-no').onclick = closeCustomAlert;
            elements.alertModal.classList.remove('opacity-0', 'pointer-events-none');
        }
        
        function closeCustomAlert() {
            elements.alertModal.classList.add('opacity-0', 'pointer-events-none');
        }

        function handleManualScore(event, teamId) {
            if (event.key === 'Enter') {
                initAudio();
                const inputElement = event.target;
                const value = parseInt(inputElement.value, 10);
                if (!isNaN(value)) {
                    teams[teamId].score += value;
                    bankScore -= value;
                    updateBankUI();
                    const actionText = value >= 0 ? `‡πÄ‡∏û‡∏¥‡πà‡∏°` : `‡∏•‡∏î`;
                    addLog(teamId, `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ñ‡∏π‡∏Å${actionText}‡πÇ‡∏î‡∏¢‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô ${Math.abs(value).toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`);
                    playSound(value >= 0 ? 'positive' : 'negative');
                    updateTeamUI(teamId);
                    inputElement.value = '';
                }
            }
        }
        
        function getGamblePrize() {
            const rand = Math.random();
            if (rand < 0.4) { return Math.floor(Math.random() * 9001); } 
            else if (rand < 0.7) { return Math.floor(Math.random() * (300000 - 9001 + 1)) + 9001; }
            else if (rand < 0.9) { return Math.floor(Math.random() * (700000 - 300001 + 1)) + 300001; }
            else { return Math.floor(Math.random() * (1000000 - 700001 + 1)) + 700001; }
        }

        function handleGamble(teamId) {
            initAudio();
            const betAmount = 10000;
            const teamData = teams[teamId];

            if (teamData.score < betAmount) {
                addLog(teamId, `‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏à‡∏∞‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô ‡πÅ‡∏ï‡πà‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠! (‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ${betAmount.toLocaleString()})`);
                playSound('negative');
                return;
            }

            teamData.score -= betAmount;
            bankScore += betAmount;
            updateBankUI();
            updateTeamUI(teamId);
            
            elements.gambleModal.classList.remove('opacity-0', 'pointer-events-none');
            elements.gambleResult.classList.add('hidden');
            
            playSound('gamble_reel', 5);
            const reelInterval = setInterval(() => {
                const randomDisplay = Math.floor(Math.random() * 1000000);
                elements.gambleReel.textContent = randomDisplay.toString().padStart(7, '0');
            }, 50);

            setTimeout(() => {
                clearInterval(reelInterval);
                let prize = getGamblePrize();
                if (teamStatuses[teamId]?.scoreMultiplier > 1) {
                    prize *= teamStatuses[teamId].scoreMultiplier;
                    addLog(teamId, `x${teamStatuses[teamId].scoreMultiplier} Multiplier on Gamble!`);
                    teamStatuses[teamId].scoreMultiplier = 1;
                }
                teamData.score += prize;
                bankScore -= prize;
                
                elements.gambleReel.textContent = prize.toLocaleString();
                
                let resultMessage = (prize > 0) ? `‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• ${prize.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!` : `‡πÄ‡∏™‡∏µ‡∏¢‡πÉ‡∏à‡∏î‡πâ‡∏ß‡∏¢... ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏•‡∏¢!`;
                if(prize > 700000) resultMessage = `‡πÅ‡∏à‡πá‡∏Ñ‡∏û‡∏≠‡∏ï‡πÅ‡∏ï‡∏Å! ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÉ‡∏´‡∏ç‡πà ${prize.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`;
                
                playSound(prize > 0 ? 'positive' : 'negative');
                
                elements.gambleResult.querySelector('p').textContent = resultMessage;
                elements.gambleResult.classList.remove('hidden');

                addLog(teamId, `‡∏à‡πà‡∏≤‡∏¢ 10,000 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏î‡∏î‡∏ß‡∏á... ‡πÅ‡∏•‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ${prize.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!`);
                updateBankUI();
                updateTeamUI(teamId);
            }, 5000);
        }

        function closeGambleModal() {
            elements.gambleModal.classList.add('opacity-0', 'pointer-events-none');
        }
        
        // --- SUMMARY LOGIC ---
        function handleSummary() {
            initAudio(); playSound('end');
            const sortedTeams = Object.entries(teams)
                .filter(([id]) => parseInt(id) <= numberOfTeams)
                .sort(([, a], [, b]) => b.score - a.score);

            elements.summaryContent.innerHTML = sortedTeams.map(([id, team], index) => `
                <div>
                    <h4 class="text-lg font-bold">${index === 0 ? '‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞ <i class="fa-solid fa-crown text-yellow-400"></i>' : `‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà ${index + 1}`}</h4>
                    <p class="font-pixel text-2xl" style="color: ${team.color};">${team.name}</p>
                    <p class="text-xl font-bold">${team.score.toLocaleString()} PTS</p>
                </div>
            `).join('<hr class="border-gray-700 my-2">');
            
            const punishmentReel = document.createElement('div');
            punishmentReel.className = 'font-pixel text-2xl text-yellow-400';
            elements.summaryPunishment.innerHTML = '';
            elements.summaryPunishment.appendChild(punishmentReel);

            elements.closeSummaryButton.classList.add('hidden');
            elements.summaryModal.classList.remove('opacity-0', 'pointer-events-none');

            const punishments = ["‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î‡∏ï‡∏ö 30 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á", "‡∏î‡∏±‡∏ô‡∏û‡∏∑‡πâ‡∏ô 20 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á", "‡πÅ‡∏û‡∏•‡∏á‡∏Ñ‡πå 2 ‡∏ô‡∏≤‡∏ó‡∏µ", "‡∏õ‡∏±‡πà‡∏ô‡∏à‡∏¥‡πâ‡∏á‡∏´‡∏£‡∏µ‡∏î 10 ‡∏£‡∏≠‡∏ö ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡∏£‡∏á", "‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ"];
            const loser = sortedTeams[sortedTeams.length - 1][1];

            if (sortedTeams[0][1].score > loser.score) {
                playSound('gamble_reel', 5);
                const reelInterval = setInterval(() => {
                    punishmentReel.textContent = punishments[Math.floor(Math.random() * punishments.length)];
                }, 100);

                setTimeout(() => {
                    clearInterval(reelInterval);
                    const finalPunishment = punishments[Math.floor(Math.random() * punishments.length)];
                    elements.summaryPunishment.innerHTML = `<h4 class="text-lg font-bold text-red-500">‡∏ö‡∏ó‡∏•‡∏á‡πÇ‡∏ó‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ${loser.name}</h4><p class="text-2xl font-bold text-white">${finalPunishment}</p>`;
                    elements.closeSummaryButton.classList.remove('hidden');
                }, 5000);
            } else { // Draw
                elements.summaryContent.innerHTML = `<h4 class="font-pixel text-2xl text-yellow-400">‡πÄ‡∏™‡∏°‡∏≠!</h4><p class="text-xl font-bold">${loser.score.toLocaleString()} PTS</p>`;
                elements.summaryPunishment.innerHTML = `<h4 class="text-lg font-bold">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÅ‡∏û‡πâ!</h4><p class="text-2xl font-bold text-white">‡∏£‡∏≠‡∏î‡∏ï‡∏±‡∏ß‡πÑ‡∏õ‡∏ô‡∏∞!</p>`;
                elements.closeSummaryButton.classList.remove('hidden');
            }
        }

        function closeSummaryModal() {
            elements.summaryModal.classList.add('opacity-0', 'pointer-events-none');
        }

        // --- SPECIAL EVENTS ---
        function triggerRandomEvent() {
            if (currentEvent) return; 
            const event = ['BLOOD_MOON', 'MARKET_CRASH', null, null, null][Math.floor(Math.random() * 5)];

            if (event === 'BLOOD_MOON') {
                currentEvent = 'BLOOD_MOON';
                elements.eventBannerContainer.innerHTML = `<div class="panel p-4 text-center border-red-500 event-banner"><h3 class="font-pixel text-red-500 text-lg mb-2">BLOOD MOON!</h3><p class="text-white">‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á‡∏Ç‡∏∂‡πâ‡∏ô 50% ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ 1 ‡∏ô‡∏≤‡∏ó‡∏µ!</p></div>`;
                playSound('negative');
                setTimeout(() => { currentEvent = null; elements.eventBannerContainer.innerHTML = ''; }, 60000);
            } else if (event === 'MARKET_CRASH') {
                elements.eventBannerContainer.innerHTML = `<div class="panel p-4 text-center border-yellow-500 event-banner"><h3 class="font-pixel text-yellow-500 text-lg mb-2">MARKET CRASH!</h3><p class="text-white">‡∏ï‡∏•‡∏≤‡∏î‡∏´‡∏∏‡πâ‡∏ô‡∏•‡πà‡∏°! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°‡∏•‡∏î‡∏•‡∏á 15%!</p></div>`;
                playSound('negative');
                Object.keys(teams).filter(id => parseInt(id) <= numberOfTeams).forEach(id => {
                    const loss = Math.floor(teams[id].score * 0.15);
                    teams[id].score -= loss; bankScore += loss;
                });
                updateBankUI(); addLog(null, `‡∏ï‡∏•‡∏≤‡∏î‡∏´‡∏∏‡πâ‡∏ô‡∏•‡πà‡∏°! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°‡∏•‡∏î‡∏•‡∏á 15%!`); updateAllTeamUIs();
                setTimeout(() => { elements.eventBannerContainer.innerHTML = ''; }, 10000);
            }
        }
        
        // --- TROLL BUTTONS & RESET ---
        function handleResetGame() {
            showCustomConfirm('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏°?', '‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?', 'ü§î', () => {
                Object.keys(teams).filter(id => parseInt(id) <= numberOfTeams).forEach(id => {
                    teams[id].score = 100000;
                    if (teams[id].debt) { clearInterval(teams[id].debt.interval); teams[id].debt = null; }
                });
                bankScore = 1000000000000;
                feedEvents.length = 0;
                initializeTeamStatuses();
                updateAllTeamUIs();
                updateBankUI();
                renderBattleLog();
                addLog(null, '‡πÄ‡∏Å‡∏°‡∏ñ‡∏π‡∏Å‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï!');
                playSound('end');
            });
        }
        
        function handleRobinHood() {
            const sorted = Object.entries(teams).filter(([id]) => parseInt(id) <= numberOfTeams).sort(([,a],[,b]) => a.score-b.score);
            if (sorted.length < 2 || sorted[0][1].score === sorted[sorted.length-1][1].score) {
                addLog(null, '‡πÇ‡∏£‡∏ö‡∏¥‡∏ô‡∏Æ‡∏π‡πâ‡∏î‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏ï‡∏±‡∏ß ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏ô‡∏£‡∏ß‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏ô‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô!'); playSound('negative'); return;
            }
            const leaderId = sorted[sorted.length-1][0];
            const trailerId = sorted[0][0];
            const amount = Math.floor(teams[leaderId].score * 0.25);
            teams[leaderId].score -= amount; teams[trailerId].score += amount;
            addLog(null, `‡πÇ‡∏£‡∏ö‡∏¥‡∏ô‡∏Æ‡∏π‡πâ‡∏î‡∏õ‡∏•‡πâ‡∏ô ${amount.toLocaleString()} ‡∏à‡∏≤‡∏Å ${teams[leaderId].name} ‡πÑ‡∏õ‡πÉ‡∏´‡πâ ${teams[trailerId].name}!`);
            playSound('positive'); updateAllTeamUIs();
        }

        function handleBlindBet() {
            addLog(null, '‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô‡∏ï‡∏≤‡∏ö‡∏≠‡∏î! ‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏ß‡∏±‡∏î‡∏î‡∏ß‡∏á!'); playSound('negative');
            Object.keys(teams).filter(id => parseInt(id) <= numberOfTeams).forEach((id, i) => {
                setTimeout(() => handleGamble(parseInt(id)), 500 + i * 5500);
            });
        }

        function handleRandomEventButton() {
            const activeIds = Object.keys(teams).filter(id => parseInt(id) <= numberOfTeams);
            const luckyTeamId = activeIds[Math.floor(Math.random() * activeIds.length)];
            teams[luckyTeamId].score += 50000; bankScore -= 50000;
            addLog(null, `‡πÇ‡∏ä‡∏Ñ‡∏ä‡∏∞‡∏ï‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡∏° ${teams[luckyTeamId].name}! ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö 50,000!`);
            playSound('positive'); updateAllTeamUIs(); updateBankUI();
        }
        
        // --- LOAN, BUY, BLACK MARKET LOGIC ---
        function handleLoan(teamId) { initAudio(); const teamData = teams[teamId]; if (teamData.debt) { if (teamData.score >= teamData.debt.amount) { teamData.score -= teamData.debt.amount; bankScore += teamData.debt.amount; addLog(teamId, `‡∏ä‡∏≥‡∏£‡∏∞‡∏´‡∏ô‡∏µ‡πâ ${teamData.debt.amount.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!`); clearInterval(teamData.debt.interval); teamData.debt = null; playSound('positive'); } else { addLog(teamId, `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡∏´‡∏ô‡∏µ‡πâ!`); playSound('negative'); } } else { const loanAmountInput = document.getElementById(`team${teamId}-loan-amount`); const amount = parseInt(loanAmountInput.value, 10); if (!isNaN(amount) && amount > 0 && bankScore >= amount) { teamData.score += amount; bankScore -= amount; teamData.debt = { principal: amount, amount: amount, interval: setInterval(() => { const interest = Math.floor(teamData.debt.principal * 0.20); teamData.debt.amount += interest; addLog(teamId, `‡πÇ‡∏î‡∏ô‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢ ${interest.toLocaleString()}! ‡∏¢‡∏≠‡∏î‡∏´‡∏ô‡∏µ‡πâ‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô ${teamData.debt.amount.toLocaleString()}`); updateTeamUI(teamId); }, 600000) }; addLog(teamId, `‡∏Å‡∏π‡πâ‡∏¢‡∏∑‡∏° ${amount.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!`); playSound('positive'); loanAmountInput.value = ''; } else { addLog(teamId, `‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏π‡πâ‡∏¢‡∏∑‡∏°‡πÑ‡∏î‡πâ! (‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£)`); playSound('negative'); } } updateBankUI(); updateTeamUI(teamId); }
        function handleBuyCards(teamId) { initAudio(); const teamData = teams[teamId]; const teamElements = elements[`team${teamId}`]; const quantity = parseInt(teamElements.buyAmountInput.value, 10); if (isNaN(quantity) || quantity <= 0) { addLog(teamId, `‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠!`); playSound('negative'); return; } const totalCost = quantity * 50000; if (teamData.score >= totalCost) { teamData.score -= totalCost; bankScore += totalCost; updateBankUI(); addLog(teamId, `‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡∏≤‡∏£‡πå‡∏î ${quantity} ‡πÉ‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡πÄ‡∏™‡∏µ‡∏¢‡πÑ‡∏õ ${totalCost.toLocaleString()} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`); playSound('positive'); teamElements.buyAmountInput.value = ''; updateTeamUI(teamId); } else { addLog(teamId, `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡∏≤‡∏£‡πå‡∏î! (‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ${totalCost.toLocaleString()})`); playSound('negative'); } }
        function handleBlackMarket(teamId) { initAudio(); const cost = 250000; const teamData = teams[teamId]; if (teamData.score < cost) { addLog(teamId, `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏ï‡∏•‡∏≤‡∏î‡∏°‡∏∑‡∏î! (‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ${cost.toLocaleString()})`); playSound('negative'); return; } teamData.score -= cost; bankScore += cost; updateBankUI(); updateTeamUI(teamId); addLog(teamId, `‡∏à‡πà‡∏≤‡∏¢ ${cost.toLocaleString()} ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ï‡∏•‡∏≤‡∏î‡∏°‡∏∑‡∏î...`); playSound('gamble_reel', 2); setTimeout(() => { const legendaryCards = Object.keys(cardDatabase).filter(k => cardDatabase[k].isLegendary); const randomCard = legendaryCards[Math.floor(Math.random() * legendaryCards.length)]; activeTeam = teamId; showCardInfo(randomCard); }, 2000); }
        
        // --- Team Setup ---
        function setupTeams(count) {
            if (count === 3) {
                numberOfTeams = 3;
                if (!teams[3]) {
                    teams[3] = { name: 'Green Team', color: '#22c55e', score: 100000, debt: null };
                }
                elements.team3.panel.style.display = 'flex';
                elements.teamsGrid.classList.remove('lg:grid-cols-2');
                elements.teamsGrid.classList.add('lg:grid-cols-3');
                elements.set3TeamsBtn.classList.add('bg-blue-600', 'border-blue-400');
                elements.set3TeamsBtn.classList.remove('bg-gray-700', 'border-transparent');
                elements.set2TeamsBtn.classList.remove('bg-blue-600', 'border-blue-400');
                elements.set2TeamsBtn.classList.add('bg-gray-700', 'border-transparent');
            } else { // count === 2
                numberOfTeams = 2;
                elements.team3.panel.style.display = 'none';
                elements.teamsGrid.classList.add('lg:grid-cols-2');
                elements.teamsGrid.classList.remove('lg:grid-cols-3');
                elements.set2TeamsBtn.classList.add('bg-blue-600', 'border-blue-400');
                elements.set2TeamsBtn.classList.remove('bg-gray-700', 'border-transparent');
                elements.set3TeamsBtn.classList.remove('bg-blue-600', 'border-blue-400');
                elements.set3TeamsBtn.classList.add('bg-gray-700', 'border-transparent');
            }
            updateAllTeamUIs();
        }

        // --- Event Listeners ---
        elements.team1.name.addEventListener('input', (e) => { teams[1].name = e.target.value; });
        elements.team2.name.addEventListener('input', (e) => { teams[2].name = e.target.value; });
        elements.team3.name.addEventListener('input', (e) => { if(teams[3]) teams[3].name = e.target.value; });
        elements.team1.color.addEventListener('input', (e) => { teams[1].color = e.target.value; updateTeamUI(1); });
        elements.team2.color.addEventListener('input', (e) => { teams[2].color = e.target.value; updateTeamUI(2); });
        elements.team3.color.addEventListener('input', (e) => { if(teams[3]) { teams[3].color = e.target.value; updateTeamUI(3); }});
        elements.team1.manualScore.addEventListener('keydown', (e) => handleManualScore(e, 1));
        elements.team2.manualScore.addEventListener('keydown', (e) => handleManualScore(e, 2));
        elements.team3.manualScore.addEventListener('keydown', (e) => handleManualScore(e, 3));
        elements.team1.rfidInput.addEventListener('keydown', (e) => handleRfidInput(e, 1));
        elements.team2.rfidInput.addEventListener('keydown', (e) => handleRfidInput(e, 2));
        elements.team3.rfidInput.addEventListener('keydown', (e) => handleRfidInput(e, 3));

        elements.set2TeamsBtn.addEventListener('click', () => setupTeams(2));
        elements.set3TeamsBtn.addEventListener('click', () => setupTeams(3));
        
        elements.closeAlertButton.addEventListener('click', closeCustomAlert);
        elements.closeGambleButton.addEventListener('click', closeGambleModal);
        elements.summaryButton.addEventListener('click', handleSummary);
        elements.closeSummaryButton.addEventListener('click', closeSummaryModal);
        elements.resetGameButton.addEventListener('click', handleResetGame);
        elements.trollRobinhoodButton.addEventListener('click', handleRobinHood);
        elements.trollBlindBetButton.addEventListener('click', handleBlindBet);
        elements.trollRandomButton.addEventListener('click', handleRandomEventButton);

        document.addEventListener('DOMContentLoaded', () => {
            const title = "TEAM BATTLE";
            const titleContainer = elements.mainTitle;
            title.split('').forEach((char, i) => {
                const span = document.createElement('span');
                span.textContent = char === ' ' ? '\u00A0' : char;
                span.className = 'title-char';
                span.style.animationDelay = `${i * 0.1}s`;
                titleContainer.appendChild(span);
            });
            
            initializeTeamStatuses();
            updateAllTeamUIs();
            updateBankUI();
            renderBattleLog();
            elements.team1.rfidInput.focus();
            
            setInterval(triggerRandomEvent, Math.floor(Math.random() * 60000) + 60000);
        });
    </script>
</body>
</html>

